
> roomsync-backend@1.0.0 test:coverage
> jest --coverage

  console.log
    Final configuration: { PORT: 4000, GOOGLE_CLIENT_ID: '[SET]', JWT_SECRET: '[SET]' }

      at Object.<anonymous> (src/config.ts:41:9)

  console.log
    Final configuration: { PORT: 4000, GOOGLE_CLIENT_ID: '[SET]', JWT_SECRET: '[SET]' }

      at Object.<anonymous> (src/config.ts:41:9)

  console.log
    Final configuration: { PORT: 4000, GOOGLE_CLIENT_ID: '[SET]', JWT_SECRET: '[SET]' }

      at Object.<anonymous> (src/config.ts:41:9)

  console.log
    Final configuration: { PORT: 4000, GOOGLE_CLIENT_ID: '[SET]', JWT_SECRET: '[SET]' }

      at Object.<anonymous> (src/config.ts:41:9)

  console.log
    Final configuration: { PORT: 4000, GOOGLE_CLIENT_ID: '[SET]', JWT_SECRET: '[SET]' }

      at Object.<anonymous> (src/config.ts:41:9)

  console.log
    Final configuration: { PORT: 4000, GOOGLE_CLIENT_ID: '[SET]', JWT_SECRET: '[SET]' }

      at Object.<anonymous> (src/config.ts:41:9)

npm : PASS src/__tests__/no-mocks/health.test.ts
At C:\Users\andy2\AppData\Local\Temp\ps-script-dbaa3866-64dc-41e3-b5c9-ad99476ac792.ps1:87 char:23
+ Set-Location backend; npm run test:coverage 2>&1 | Out-File -FilePath ...
+                       ~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (PASS src/__test.../health.test.ts:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
  Health Check API - No Mocking
    ΓêÜ GET /api/health - should return health status (20 ms)

  console.log
    Logging in user with email: existing@example.com

      at Object.log [as login] (src/services/auth.ts:42:15)

  console.log
    Logging in user with email: nonexistent@example.com

      at Object.log [as login] (src/services/auth.ts:42:15)

  console.log
    Logging in user with email: logintest@example.com

      at Object.log [as login] (src/services/auth.ts:42:15)

PASS src/__tests__/no-mocks/services.test.ts
  AuthService - No Mocking
    ΓêÜ signup - should create new user successfully (139 ms)
    ΓêÜ signup - should reject existing user (8 ms)
    ΓêÜ login - should login existing user successfully (11 ms)
    ΓêÜ login - should reject non-existent user (6 ms)
    ΓêÜ signup - should handle errors gracefully (7 ms)
    ΓêÜ login - should handle errors gracefully (7 ms)

  console.error
    Error: Invalid token
        at Object.<anonymous> (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\__tests__\no-mocks\auth.test.ts:50:17)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\jest-mock\build\index.js:305:39
        at Object.<anonymous> (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\jest-mock\build\index.js:312:13)
        at Object.mockConstructor [as verifyIdToken] (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\jest-mock\build\index.js:102:19)
        at verifyIdToken (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\auth.ts:8:31)
        at verifyGoogleToken (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\auth.ts:26:47)
        at Layer.handleRequest (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\layer.js:152:17)
        at next (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\route.js:157:13)
        at Route.dispatch (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\route.js:117:3)
        at handle (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:435:11)
        at Layer.handleRequest (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\layer.js:152:17)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:295:15
        at processParams (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:582:12)
        at next (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:291:5)
        at Function.handle (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:186:3)
        at router (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:60:12)
        at Layer.handleRequest (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\layer.js:152:17)
        at trimPrefix (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:342:13)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:297:9
        at processParams (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:582:12)
        at next (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:291:5)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\body-parser\lib\read.js:132:5
        at AsyncResource.runInAsyncScope (node:async_hooks:203:9)
        at invokeCallback (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\raw-body\index.js:238:16)
        at done (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:517:28)
        at endReadableNT (node:internal/streams/readable:1368:12)
        at processTicksAndRejections (node:internal/process/task_queues:82:21)

      28 |       return res.json(result);
      29 |     } catch (err) {
    > 30 |       console.error(err);
         |               ^
      31 |       res.status(401).json({ success: false, message: "Signup failed: Invalid Google token" });
      32 |     }
      33 |   },

      at error (src/controller/auth.ts:30:15)

  console.error
    Error: Invalid token
        at Object.<anonymous> (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\__tests__\no-mocks\auth.test.ts:50:17)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\jest-mock\build\index.js:305:39
        at Object.<anonymous> (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\jest-mock\build\index.js:312:13)
        at Object.mockConstructor [as verifyIdToken] (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\jest-mock\build\index.js:102:19)
        at verifyIdToken (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\auth.ts:8:31)
        at verifyGoogleToken (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\auth.ts:40:31)
        at Layer.handleRequest (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\layer.js:152:17)
        at next (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\route.js:157:13)
        at Route.dispatch (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\route.js:117:3)
        at handle (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:435:11)
        at Layer.handleRequest (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\layer.js:152:17)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:295:15
        at processParams (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:582:12)
        at next (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:291:5)
        at Function.handle (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:186:3)
        at router (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:60:12)
        at Layer.handleRequest (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\layer.js:152:17)
        at trimPrefix (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:342:13)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:297:9
        at processParams (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:582:12)
        at next (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:291:5)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\body-parser\lib\read.js:132:5
        at AsyncResource.runInAsyncScope (node:async_hooks:203:9)
        at invokeCallback (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\raw-body\index.js:238:16)
        at done (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:517:28)
        at endReadableNT (node:internal/streams/readable:1368:12)
        at processTicksAndRejections (node:internal/process/task_queues:82:21)

      42 |       return res.json(result);
      43 |     } catch (err) {
    > 44 |       console.error(err);
         |               ^
      45 |       res.status(401).json({ success: false, message: "Login failed: Invalid Google token" });
      46 |     }
      47 |   },

      at error (src/controller/auth.ts:44:15)

  console.log
    Logging in user with email: existing@example.com

      at Object.log [as login] (src/services/auth.ts:42:15)

  console.error
    Error: Invalid token
        at verifyGoogleToken (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\auth.ts:13:23)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at signup (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\auth.ts:26:41)

      28 |       return res.json(result);
      29 |     } catch (err) {
    > 30 |       console.error(err);
         |               ^
      31 |       res.status(401).json({ success: false, message: "Signup failed: Invalid Google token" });
      32 |     }
      33 |   },

      at error (src/controller/auth.ts:30:15)

  console.log
    [2025-11-04T22:53:32.110Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.110Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.110Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.110Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.110Z] AUTHENTICATE: Token decoded successfully: { id: '690a83eb766bfc01f7f49323', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.110Z] AUTHENTICATE: Fetching user from database with ID: 690a83eb766bfc01f7f49323

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.110Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83eb766bfc01f7f49323'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.110Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.209Z] AUTHENTICATE: Starting authentication for GET /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.209Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.209Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.209Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.209Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f4933a', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.209Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f4933a

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.209Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f4933a'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.209Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.225Z] GET /api/task - User: 690a83ec766bfc01f7f4933a

      at log (src/routes/task.ts:119:11)

  console.log
    [2025-11-04T22:53:32.219Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.228Z] GET /api/task - Group found: new ObjectId('690a83ec766bfc01f7f4933c')

      at log (src/routes/task.ts:126:11)

  console.log
    [2025-11-04T22:53:32.219Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.219Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.219Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.219Z] AUTHENTICATE: Token decoded successfully: { id: '690a83eb4104895992ba9bcb', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.219Z] AUTHENTICATE: Fetching user from database with ID: 690a83eb4104895992ba9bcb

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.235Z] GET /api/task - Found 1 tasks

      at log (src/routes/task.ts:142:11)

  console.log
    [2025-11-04T22:53:32.219Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83eb4104895992ba9bcb'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.219Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.246Z] GROUP CREATE: Starting group creation

      at log (src/routes/group.ts:18:11)

  console.log
    [2025-11-04T22:53:32.246Z] GROUP CREATE: User: {
      _id: '690a83eb4104895992ba9bcb',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/group.ts:19:11)

  console.log
    [2025-11-04T22:53:32.246Z] GROUP CREATE: Request body: { name: 'Test Group' }

      at log (src/routes/group.ts:20:11)

  console.log
    [2025-11-04T22:53:32.246Z] GROUP CREATE: Checking if user is already in a group

      at log (src/routes/group.ts:32:11)

  console.log
    [2025-11-04T22:53:32.253Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.246Z] GROUP CREATE: Creating new group with name: Test Group

      at log (src/routes/group.ts:46:11)

  console.log
    [2025-11-04T22:53:32.253Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.253Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.253Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.253Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f4934a', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.253Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f4934a

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.253Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f4934a'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.253Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.246Z] GROUP CREATE: Group created successfully: new ObjectId('690a83ec4104895992ba9bd2')

      at log (src/routes/group.ts:57:11)

  console.log
    [2025-11-04T22:53:32.246Z] GROUP CREATE: Updating user's groupName to: Test Group

      at log (src/routes/group.ts:58:11)

  console.log
    [2025-11-04T22:53:32.246Z] GROUP CREATE: Populating group with owner and member details

      at log (src/routes/group.ts:64:11)

  console.log
    [2025-11-04T22:53:32.285Z] AUTHENTICATE: Starting authentication for GET /my-tasks

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.285Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.285Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.285Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.285Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f49354', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.285Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f49354

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.285Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f49354'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.285Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    [2025-11-04T22:53:32.246Z] GROUP CREATE: Group creation completed successfully

      at log (src/routes/group.ts:69:11)

  console.log
    [2025-11-04T22:53:32.246Z] GROUP CREATE: Group code generated: D2QD

      at log (src/routes/group.ts:70:11)

  console.log
    [2025-11-04T22:53:32.246Z] GROUP CREATE: Sending response with group data

      at log (src/routes/group.ts:71:11)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: 'This is a test bio',
      profilePicture: undefined,
      livingPreferences: undefined
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-04T22:53:32.326Z] AUTHENTICATE: Starting authentication for PUT /690a83ec766bfc01f7f4936e/status

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.326Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.326Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.326Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.326Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f49368', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.326Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f49368

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.330Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.334Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.330Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.334Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.334Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.330Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.334Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.326Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f49368'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.330Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.326Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.334Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec4104895992ba9bdb', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.334Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec4104895992ba9bdb

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.330Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec74c25c8eecd5c1f2', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.330Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec74c25c8eecd5c1f2

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.334Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec4104895992ba9bdb'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.334Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.347Z] GROUP CREATE: Starting group creation

      at log (src/routes/group.ts:18:11)

  console.log
    [2025-11-04T22:53:32.330Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec74c25c8eecd5c1f2'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.330Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.347Z] GROUP CREATE: User: {
      _id: '690a83ec4104895992ba9bdb',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/group.ts:19:11)

  console.log
    [2025-11-04T22:53:32.347Z] GROUP CREATE: Request body: { name: '' }

      at log (src/routes/group.ts:20:11)

  console.log
    [2025-11-04T22:53:32.349Z] DELETE USER: Starting user deletion

      at log (src/controller/user.ts:168:13)

  console.log
    [2025-11-04T22:53:32.349Z] DELETE USER: Deleting user with ID: 690a83ec74c25c8eecd5c1f2

      at log (src/controller/user.ts:178:15)

  console.log
    [2025-11-04T22:53:32.347Z] GROUP CREATE: Validation failed - group name is required

      at log (src/routes/group.ts:25:13)

  console.log
    [2025-11-04T22:53:32.349Z] DELETE USER: User deleted successfully

      at log (src/controller/user.ts:225:15)

  console.log
    [2025-11-04T22:53:32.367Z] AUTHENTICATE: Starting authentication for POST /690a83ec766bfc01f7f49381/assign

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.368Z] AUTHENTICATE: Starting authentication for GET /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.367Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.368Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.367Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.368Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.367Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.367Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f4937b', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.367Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f4937b

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.368Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.367Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f4937b'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.367Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.368Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec4104895992ba9be0', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.368Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec4104895992ba9be0

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.368Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec4104895992ba9be0'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Test Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.368Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.386Z] GROUP GET: Getting group for user: 690a83ec4104895992ba9be0

      at log (src/routes/group.ts:171:11)

  console.log
    [2025-11-04T22:53:32.387Z] AUTHENTICATE: Starting authentication for PUT /users/report

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.386Z] GROUP GET: Group found: new ObjectId('690a83ec4104895992ba9be2')

      at log (src/routes/group.ts:186:13)

  console.log
    [2025-11-04T22:53:32.387Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.387Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.387Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.386Z] GROUP GET: Owner populated successfully

      at log (src/routes/group.ts:191:15)

  console.log
    [2025-11-04T22:53:32.387Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec74c25c8eecd5c1fb', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.387Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec74c25c8eecd5c1fb

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.386Z] GROUP GET: Members populated successfully

      at log (src/routes/group.ts:277:15)

  console.log
    [2025-11-04T22:53:32.386Z] GROUP GET: Member join durations:

      at log (src/routes/group.ts:292:13)

  console.log
    [2025-11-04T22:53:32.387Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec74c25c8eecd5c1fb'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.386Z]   - User Test User (690a83ec4104895992ba9be0): 0 days, 0 hours, 0 minutes (joined: 2025-11-04T22:53:32.359Z)

      at log (src/routes/group.ts:302:17)
          at Proxy.forEach (<anonymous>)

  console.log
    [2025-11-04T22:53:32.387Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    Found 1 messages from user 690a83ec74c25c8eecd5c1fd

      at log (src/controller/report.ts:40:15)

  console.log
    User 690a83ec74c25c8eecd5c1fd not marked as offensive - messages deemed acceptable

      at log (src/controller/report.ts:110:17)

  console.log
    [2025-11-04T22:53:32.405Z] AUTHENTICATE: Starting authentication for POST /assign-weekly

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.405Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.405Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.405Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.405Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f4938e', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.411Z] AUTHENTICATE: Starting authentication for POST /join

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.411Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.405Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f4938e

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.411Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.411Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.405Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f4938e'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.414Z] AUTHENTICATE: Starting authentication for PUT /users/report

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.405Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.411Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec4104895992ba9bee', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.414Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.411Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec4104895992ba9bee

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.414Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.414Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.414Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec74c25c8eecd5c20d', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.411Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec4104895992ba9bee'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.411Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.414Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec74c25c8eecd5c20d

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.420Z] GROUP JOIN: Starting group join process

      at log (src/routes/group.ts:84:11)

  console.log
    [2025-11-04T22:53:32.420Z] GROUP JOIN: User: {
      _id: '690a83ec4104895992ba9bee',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/group.ts:85:11)

  console.log
    [2025-11-04T22:53:32.420Z] GROUP JOIN: Request body: { groupCode: 'ABCD' }

      at log (src/routes/group.ts:86:11)

  console.log
    [2025-11-04T22:53:32.420Z] GROUP JOIN: Checking if user is already in a group

      at log (src/routes/group.ts:98:11)

  console.log
    [2025-11-04T22:53:32.422Z] Auto-assigning task "Weekly Task" (required: 1) to 1 members

      at log (src/routes/task.ts:401:13)

  console.log
    [2025-11-04T22:53:32.414Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec74c25c8eecd5c20d'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.414Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.438Z] AUTHENTICATE: Starting authentication for PUT /users/report

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.438Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.438Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.438Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.420Z] GROUP JOIN: Join successful, sending response

      at log (src/routes/group.ts:158:11)

  console.log
    [2025-11-04T22:53:32.438Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec74c25c8eecd5c213', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.438Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec74c25c8eecd5c213

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.438Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec74c25c8eecd5c213'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.438Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.446Z] AUTHENTICATE: Starting authentication for GET /week/2025-11-02T07:00:00.000Z

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.446Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.446Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.446Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.441Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.441Z] AUTHENTICATE: Authorization header: Missing

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.446Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f493a4', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.441Z] AUTHENTICATE: No valid token provided

      at log (src/middleware/auth.ts:16:13)

  console.log
    [2025-11-04T22:53:32.446Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f493a4

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.446Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f493a4'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.446Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.457Z] AUTHENTICATE: Starting authentication for DELETE /leave

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.457Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.457Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.457Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.457Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec4104895992ba9c00', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.457Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec4104895992ba9c00

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.468Z] AUTHENTICATE: Starting authentication for PUT /users/report

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.468Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.468Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.457Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec4104895992ba9c00'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Test Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.457Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.468Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.468Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec74c25c8eecd5c21f', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.472Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.468Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec74c25c8eecd5c21f

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.472Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.472Z] AUTHENTICATE: No valid token provided

      at log (src/middleware/auth.ts:16:13)

  console.log
    [2025-11-04T22:53:32.468Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec74c25c8eecd5c21f'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.468Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.478Z] AUTHENTICATE: Starting authentication for GET /date/2025-11-04T22:53:32.476Z

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.478Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    Found 0 messages from user 690a83ec74c25c8eecd5c221

      at log (src/controller/report.ts:40:15)

  console.log
    [2025-11-04T22:53:32.478Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.478Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.478Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f493b8', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.478Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f493b8

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.478Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f493b8'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.478Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.488Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.488Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.488Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.488Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.493Z] AUTHENTICATE: Starting authentication for PUT /transfer-ownership/690a83ec4104895992ba9c11

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.493Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.493Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.493Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.488Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ecabc185f24f529d2a', email: 'test@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.488Z] AUTHENTICATE: Fetching user from database with ID: 690a83ecabc185f24f529d2a

      at log (src/middleware/auth.ts:71:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { schedule: 'InvalidSchedule' }
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-04T22:53:32.493Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec4104895992ba9c0f', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.493Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec4104895992ba9c0f

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.493Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec4104895992ba9c0f'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.493Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.502Z] ===== TRANSFER OWNERSHIP ROUTE HIT =====

      at log (src/routes/group.ts:326:11)

  console.log
    [2025-11-04T22:53:32.502Z] Method: PUT, Original URL: /api/group/transfer-ownership/690a83ec4104895992ba9c11, Path: /transfer-ownership/690a83ec4104895992ba9c11, Params: [Object: null prototype] { newOwnerId: '690a83ec4104895992ba9c11' }

      at log (src/routes/group.ts:327:11)

  console.log
    [2025-11-04T22:53:32.502Z] GROUP TRANSFER OWNERSHIP: Transferring ownership to 690a83ec4104895992ba9c11

      at log (src/routes/group.ts:329:11)

  console.log
    [2025-11-04T22:53:32.504Z] AUTHENTICATE: Starting authentication for DELETE /690a83ec766bfc01f7f493cd

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.504Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.504Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.504Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.488Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ecabc185f24f529d2a'),
      email: 'test@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.488Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    [2025-11-04T22:53:32.502Z] GROUP TRANSFER OWNERSHIP: Ownership transferred successfully

      at log (src/routes/group.ts:375:11)

  console.log
    [2025-11-04T22:53:32.504Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f493c7', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    Received data: {
      email: 'newuser@example.com',
      bio: 'Test bio',
      profilePicture: undefined,
      livingPreferences: undefined
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-04T22:53:32.504Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f493c7

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.504Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f493c7'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.504Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.519Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.519Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.519Z] AUTHENTICATE: Token extracted: invalid-to...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.519Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.519Z] AUTHENTICATE: Token verification failed: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

      at log (src/middleware/auth.ts:96:13)

  console.log
    [2025-11-04T22:53:32.525Z] AUTHENTICATE: Starting authentication for PUT /transfer-ownership/690a83ec4104895992ba9c21

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.525Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.525Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.525Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.525Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec4104895992ba9c21', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.525Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec4104895992ba9c21

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.531Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.531Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.531Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.531Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.525Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec4104895992ba9c21'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.525Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.534Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.535Z] ===== TRANSFER OWNERSHIP ROUTE HIT =====

      at log (src/routes/group.ts:326:11)

  console.log
    [2025-11-04T22:53:32.531Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f493d8', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.534Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.535Z] Method: PUT, Original URL: /api/group/transfer-ownership/690a83ec4104895992ba9c21, Path: /transfer-ownership/690a83ec4104895992ba9c21, Params: [Object: null prototype] { newOwnerId: '690a83ec4104895992ba9c21' }

      at log (src/routes/group.ts:327:11)

  console.log
    [2025-11-04T22:53:32.531Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f493d8

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.534Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.535Z] GROUP TRANSFER OWNERSHIP: Transferring ownership to 690a83ec4104895992ba9c21

      at log (src/routes/group.ts:329:11)

  console.log
    [2025-11-04T22:53:32.534Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.531Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f493d8'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.531Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.534Z] AUTHENTICATE: Token decoded successfully: { id: '507f1f77bcf86cd799439011', email: 'fake@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.534Z] AUTHENTICATE: Fetching user from database with ID: 507f1f77bcf86cd799439011

      at log (src/middleware/auth.ts:71:13)

PASS src/__tests__/no-mocks/auth.test.ts
  Auth API - No Mocking
    ΓêÜ POST /api/auth/signup - should fail with invalid Google token (no mocking) (59 ms)
    ΓêÜ POST /api/auth/signup - should return 400 for missing token (5 ms)
    ΓêÜ POST /api/auth/login - should return 400 for missing token (5 ms)
    ΓêÜ POST /api/auth/login - should fail with invalid Google token (no mocking) (8 ms)
    ΓêÜ POST /api/auth/signup - should return 400 for empty token string (14 ms)
    ΓêÜ POST /api/auth/login - should return 400 for empty token string (20 ms)
    ΓêÜ POST /api/auth/signup - should successfully signup with valid token (78 ms)
    ΓêÜ POST /api/auth/login - should successfully login with valid token (15 ms)
    ΓêÜ POST /api/auth/signup - should handle null payload from Google token (9 ms)

  console.log
    [2025-11-04T22:53:32.534Z] AUTHENTICATE: User not found in database for ID: 507f1f77bcf86cd799439011

      at log (src/middleware/auth.ts:75:15)

  console.log
    [2025-11-04T22:53:32.551Z] AUTHENTICATE: Starting authentication for DELETE /member/690a83ec4104895992ba9c32

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.551Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.551Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.553Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.551Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.553Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.553Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.551Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec4104895992ba9c30', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.553Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.555Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.555Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.551Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec4104895992ba9c30

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.555Z] AUTHENTICATE: Token extracted: bypass-tok...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.553Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f493e2', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.555Z] AUTHENTICATE: Using bypass token for test user 1

      at log (src/middleware/auth.ts:26:15)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    [2025-11-04T22:53:32.553Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f493e2

      at log (src/middleware/auth.ts:71:13)

  console.log
    Received data: {
      email: undefined,
      bio: 'Test bio',
      profilePicture: undefined,
      livingPreferences: undefined
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-04T22:53:32.555Z] AUTHENTICATE: Bypass authentication successful for user 1

      at log (src/middleware/auth.ts:40:15)

  console.log
    [2025-11-04T22:53:32.553Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f493e2'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.553Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.551Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec4104895992ba9c30'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.551Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.563Z] GROUP REMOVE MEMBER: Removing member 690a83ec4104895992ba9c32 from group

      at log (src/routes/group.ts:394:11)

  console.log
    [2025-11-04T22:53:32.570Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.570Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.570Z] AUTHENTICATE: Token extracted: bypass-tok...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.570Z] AUTHENTICATE: Using bypass token for test user 2

      at log (src/middleware/auth.ts:46:15)

  console.log
    [2025-11-04T22:53:32.563Z] GROUP REMOVE MEMBER: Successfully removed member 690a83ec4104895992ba9c32

      at log (src/routes/group.ts:448:11)

  console.log
    [2025-11-04T22:53:32.570Z] AUTHENTICATE: Bypass authentication successful for user 2

      at log (src/middleware/auth.ts:60:15)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa',
      profilePicture: undefined,
      livingPreferences: undefined
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-04T22:53:32.577Z] AUTHENTICATE: Starting authentication for PUT /690a83ec766bfc01f7f493f2/status

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.577Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.577Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.577Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.577Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f493ec', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.577Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f493ec

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.577Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f493ec'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.577Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.585Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.585Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.585Z] AUTHENTICATE: Token extracted: bypass-tok...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.585Z] AUTHENTICATE: Using bypass token for test user 1

      at log (src/middleware/auth.ts:26:15)

  console.log
    [2025-11-04T22:53:32.585Z] AUTHENTICATE: Test user 1 not found in database

      at log (src/middleware/auth.ts:29:17)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { drinking: 'InvalidDrinking' }
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-04T22:53:32.597Z] AUTHENTICATE: Starting authentication for POST /join

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.597Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.599Z] AUTHENTICATE: Starting authentication for POST /690a83ec766bfc01f7f49400/assign

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.597Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.599Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.597Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.600Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.599Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.600Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.599Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.597Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec4104895992ba9c43', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.600Z] AUTHENTICATE: Token extracted: bypass-tok...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.600Z] AUTHENTICATE: Using bypass token for test user 2

      at log (src/middleware/auth.ts:46:15)

  console.log
    [2025-11-04T22:53:32.599Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f493fa', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.599Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f493fa

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.600Z] AUTHENTICATE: Test user 2 not found in database

      at log (src/middleware/auth.ts:49:17)

  console.log
    [2025-11-04T22:53:32.597Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec4104895992ba9c43

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.599Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f493fa'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.599Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.597Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec4104895992ba9c43'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.597Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.608Z] GROUP JOIN: Starting group join process

      at log (src/routes/group.ts:84:11)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    [2025-11-04T22:53:32.608Z] GROUP JOIN: User: {
      _id: '690a83ec4104895992ba9c43',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/group.ts:85:11)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { partying: 'InvalidPartying' }
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-04T22:53:32.608Z] GROUP JOIN: Request body: { groupCode: 'FULL' }

      at log (src/routes/group.ts:86:11)

  console.log
    [2025-11-04T22:53:32.608Z] GROUP JOIN: Checking if user is already in a group

      at log (src/routes/group.ts:98:11)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { noise: 'InvalidNoise' }
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-04T22:53:32.625Z] AUTHENTICATE: Starting authentication for POST /join

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.625Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.625Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.625Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.628Z] AUTHENTICATE: Starting authentication for POST /690a83ec766bfc01f7f49416/assign

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.625Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec4104895992ba9c6e', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.628Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.625Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec4104895992ba9c6e

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.628Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.628Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.625Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec4104895992ba9c6e'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.628Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f49406', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.625Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.628Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f49406

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.632Z] GROUP JOIN: Starting group join process

      at log (src/routes/group.ts:84:11)

  console.log
    [2025-11-04T22:53:32.632Z] GROUP JOIN: User: {
      _id: '690a83ec4104895992ba9c6e',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/group.ts:85:11)

  console.log
    [2025-11-04T22:53:32.632Z] GROUP JOIN: Request body: { groupCode: 'INVALID' }

      at log (src/routes/group.ts:86:11)

  console.log
    [2025-11-04T22:53:32.632Z] GROUP JOIN: Checking if user is already in a group

      at log (src/routes/group.ts:98:11)

  console.log
    [2025-11-04T22:53:32.628Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f49406'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Other Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    [2025-11-04T22:53:32.628Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { profession: 'InvalidProfession' }
    }

      at log (src/controller/user.ts:67:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'nonexistent@example.com',
      bio: 'Test bio',
      profilePicture: undefined,
      livingPreferences: undefined
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-04T22:53:32.649Z] AUTHENTICATE: Starting authentication for GET /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.649Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.649Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.649Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.649Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec4104895992ba9c75', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.649Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec4104895992ba9c75

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.649Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec4104895992ba9c75'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.649Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.660Z] AUTHENTICATE: Starting authentication for DELETE /690a83ec766bfc01f7f49430

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.660Z] GROUP GET: Getting group for user: 690a83ec4104895992ba9c75

      at log (src/routes/group.ts:171:11)

  console.log
    [2025-11-04T22:53:32.660Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.660Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.660Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.660Z] GROUP GET: User is not a member of any group

      at log (src/routes/group.ts:179:15)

  console.log
    [2025-11-04T22:53:32.660Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f49420', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.660Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f49420

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.666Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.660Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f49420'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Other Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.660Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.666Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.666Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.666Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.666Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec74c25c8eecd5c280', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.666Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec74c25c8eecd5c280

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.666Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec74c25c8eecd5c280'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.666Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.675Z] DELETE USER: Starting user deletion

      at log (src/controller/user.ts:168:13)

  console.log
    [2025-11-04T22:53:32.675Z] DELETE USER: Deleting user with ID: 690a83ec74c25c8eecd5c280

      at log (src/controller/user.ts:178:15)

  console.log
    [2025-11-04T22:53:32.675Z] AUTHENTICATE: Starting authentication for PUT /transfer-ownership/690a83ec4104895992ba9c7d

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.675Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.675Z] DELETE USER: Removing user from group 690a83ec74c25c8eecd5c284

      at log (src/controller/user.ts:183:17)

  console.log
    [2025-11-04T22:53:32.675Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.675Z] DELETE USER: Transferred ownership to oldest member 690a83ec74c25c8eecd5c282 (joined: Mon Jan 01 2024 16:00:00 GMT-0800 (Pacific Standard Time))

      at log (src/controller/user.ts:199:21)

  console.log
    [2025-11-04T22:53:32.675Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.675Z] DELETE USER: Updated new owner's groupName to Test Group

      at log (src/controller/user.ts:203:21)

  console.log
    [2025-11-04T22:53:32.675Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec4104895992ba9c7b', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.675Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec4104895992ba9c7b

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.682Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.675Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec4104895992ba9c7b'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.675Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.682Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.683Z] ===== TRANSFER OWNERSHIP ROUTE HIT =====

      at log (src/routes/group.ts:326:11)

  console.log
    [2025-11-04T22:53:32.682Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.675Z] DELETE USER: User deleted successfully

      at log (src/controller/user.ts:225:15)

  console.log
    [2025-11-04T22:53:32.683Z] Method: PUT, Original URL: /api/group/transfer-ownership/690a83ec4104895992ba9c7d, Path: /transfer-ownership/690a83ec4104895992ba9c7d, Params: [Object: null prototype] { newOwnerId: '690a83ec4104895992ba9c7d' }

      at log (src/routes/group.ts:327:11)

  console.log
    [2025-11-04T22:53:32.682Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.683Z] GROUP TRANSFER OWNERSHIP: Transferring ownership to 690a83ec4104895992ba9c7d

      at log (src/routes/group.ts:329:11)

  console.log
    [2025-11-04T22:53:32.682Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec766bfc01f7f4943a', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.682Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec766bfc01f7f4943a

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.682Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec766bfc01f7f4943a'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.682Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.696Z] AUTHENTICATE: Starting authentication for DELETE /member/690a83ec4104895992ba9c88

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.696Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.696Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.696Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.696Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec4104895992ba9c88', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.701Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.696Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec4104895992ba9c88

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.701Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.701Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.696Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec4104895992ba9c88'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.696Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.701Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.704Z] GROUP REMOVE MEMBER: Removing member 690a83ec4104895992ba9c88 from group

      at log (src/routes/group.ts:394:11)

  console.log
    [2025-11-04T22:53:32.701Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec74c25c8eecd5c296', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.701Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec74c25c8eecd5c296

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.701Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec74c25c8eecd5c296'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.701Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.709Z] DELETE USER: Starting user deletion

      at log (src/controller/user.ts:168:13)

  console.log
    [2025-11-04T22:53:32.709Z] DELETE USER: Deleting user with ID: 690a83ec74c25c8eecd5c296

      at log (src/controller/user.ts:178:15)

  console.log
    [2025-11-04T22:53:32.709Z] DELETE USER: Removing user from group 690a83ec74c25c8eecd5c298

      at log (src/controller/user.ts:183:17)

  console.log
    [2025-11-04T22:53:32.709Z] DELETE USER: Group 690a83ec74c25c8eecd5c298 deleted as it has no members

      at log (src/controller/user.ts:207:21)

  console.log
    [2025-11-04T22:53:32.709Z] DELETE USER: User deleted successfully

      at log (src/controller/user.ts:225:15)

  console.log
    [2025-11-04T22:53:32.720Z] AUTHENTICATE: Starting authentication for DELETE /leave

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.720Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.720Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.720Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.720Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec4104895992ba9c93', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.720Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec4104895992ba9c93

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.720Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec4104895992ba9c93'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Test Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.720Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.728Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.728Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.728Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.728Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.728Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec74c25c8eecd5c2a5', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.728Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec74c25c8eecd5c2a5

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.728Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec74c25c8eecd5c2a5'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.728Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.737Z] DELETE USER: Starting user deletion

      at log (src/controller/user.ts:168:13)

  console.log
    [2025-11-04T22:53:32.737Z] DELETE USER: Deleting user with ID: 690a83ec74c25c8eecd5c2a5

      at log (src/controller/user.ts:178:15)

  console.log
    [2025-11-04T22:53:32.737Z] DELETE USER: Removing user from group 690a83ec74c25c8eecd5c2a9

      at log (src/controller/user.ts:183:17)

  console.log
    [2025-11-04T22:53:32.737Z] DELETE USER: User deleted successfully

      at log (src/controller/user.ts:225:15)

  console.log
    [2025-11-04T22:53:32.759Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.759Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.759Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.759Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.759Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec74c25c8eecd5c2b9', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

PASS src/__tests__/no-mocks/middleware.test.ts
  Authentication Middleware - No Mocking
    ΓêÜ should reject request without Authorization header (101 ms)
    ΓêÜ should reject invalid Authorization format (16 ms)
    ΓêÜ should authenticate with valid JWT token (32 ms)
    ΓêÜ should reject invalid JWT token (15 ms)
    ΓêÜ should reject when user not found in database (23 ms)
    ΓêÜ should authenticate with bypass-token for test user 1 (13 ms)
    ΓêÜ should authenticate with bypass-token-2 for test user 2 (17 ms)
    ΓêÜ should reject bypass-token when test user not found (14 ms)
    ΓêÜ should reject bypass-token-2 when test user 2 not found (15 ms)

  console.log
    [2025-11-04T22:53:32.759Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec74c25c8eecd5c2b9

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.759Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec74c25c8eecd5c2b9'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.759Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.767Z] DELETE USER: Starting user deletion

      at log (src/controller/user.ts:168:13)

  console.log
    [2025-11-04T22:53:32.767Z] DELETE USER: Deleting user with ID: 690a83ec74c25c8eecd5c2b9

      at log (src/controller/user.ts:178:15)

  console.log
    [2025-11-04T22:53:32.767Z] DELETE USER: Removing user from group 690a83ec74c25c8eecd5c2bf

      at log (src/controller/user.ts:183:17)

  console.log
    [2025-11-04T22:53:32.767Z] DELETE USER: Transferred ownership to oldest member 690a83ec74c25c8eecd5c2bb (joined: Mon Jan 01 2024 16:00:00 GMT-0800 (Pacific Standard Time))

      at log (src/controller/user.ts:199:21)

  console.log
    [2025-11-04T22:53:32.767Z] DELETE USER: Updated new owner's groupName to Test Group

      at log (src/controller/user.ts:203:21)

  console.log
    [2025-11-04T22:53:32.767Z] DELETE USER: User deleted successfully

      at log (src/controller/user.ts:225:15)

  console.log
    [2025-11-04T22:53:32.788Z] AUTHENTICATE: Starting authentication for PUT /users/report

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.788Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.788Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.788Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.788Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec74c25c8eecd5c2d4', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.788Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec74c25c8eecd5c2d4

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.788Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec74c25c8eecd5c2d4'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.788Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.error
    Error processing report: CastError: Cast to ObjectId failed for value "invalid-id-format" (type string) at path "_id" for model "User"
        at SchemaObjectId.cast (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\schema\objectId.js:251:11)
        at SchemaObjectId.SchemaType.applySetters (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\schemaType.js:1259:12)
        at SchemaObjectId.SchemaType.castForQuery (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\schemaType.js:1695:17)
        at cast (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\cast.js:390:32)
        at model.Query.Query.cast (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:5060:12)
        at model.Query.Query._castConditions (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:2374:10)
        at model.Query._findOne (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:2697:8)
        at model.Query.exec (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:4627:80)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at report (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\report.ts:20:28) {
      stringValue: '"invalid-id-format"',
      messageFormat: undefined,
      kind: 'ObjectId',
      value: 'invalid-id-format',
      path: '_id',
      reason: BSONError: input must be a 24 character hex string, 12 byte Uint8Array, or an integer
          at new ObjectId (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\bson\src\objectid.ts:120:15)
          at castObjectId (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\cast\objectid.js:25:12)
          at SchemaObjectId.cast (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\schema\objectId.js:249:12)
          at SchemaObjectId.SchemaType.applySetters (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\schemaType.js:1259:12)
          at SchemaObjectId.SchemaType.castForQuery (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\schemaType.js:1695:17)
          at cast (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\cast.js:390:32)
          at model.Query.Query.cast (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:5060:12)
          at model.Query.Query._castConditions (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:2374:10)
          at model.Query._findOne (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:2697:8)
          at model.Query.exec (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:4627:80)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at report (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\report.ts:20:28),
      valueType: 'string'
    }

      121 |
      122 |     } catch (error: any) {
    > 123 |       console.error('Error processing report:', error);
          |               ^
      124 |       return res.status(500).json({
      125 |         success: false,
      126 |         message: 'Failed to process report',

      at error (src/controller/report.ts:123:15)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: {
        schedule: 'Morning',
        drinking: 'Occasional',
        partying: 'Regular',
        noise: 'Quiet',
        profession: 'Student'
      }
    }

      at log (src/controller/user.ts:67:13)

PASS src/__tests__/no-mocks/group.test.ts
  Group API - No Mocking
    ΓêÜ POST /api/group - should create a new group (359 ms)
    ΓêÜ POST /api/group - should reject empty group name (30 ms)
    ΓêÜ GET /api/group - should return user group (45 ms)
    ΓêÜ POST /api/group/join - should join existing group (44 ms)
    ΓêÜ DELETE /api/group/leave - should leave group (38 ms)
    ΓêÜ PUT /api/group/transfer-ownership/:newOwnerId - should transfer ownership (33 ms)
    ΓêÜ PUT /api/group/transfer-ownership/:newOwnerId - should reject non-owner (26 ms)
    ΓêÜ DELETE /api/group/member/:memberId - should remove member (37 ms)
    ΓêÜ POST /api/group/join - should reject joining full group (39 ms)
    ΓêÜ POST /api/group/join - should reject invalid group code (24 ms)
    ΓêÜ GET /api/group - should return 404 when user not in group (25 ms)
    ΓêÜ PUT /api/group/transfer-ownership/:newOwnerId - should reject non-member transfer (22 ms)
    ΓêÜ DELETE /api/group/member/:memberId - should reject removing owner (20 ms)
    ΓêÜ DELETE /api/group/leave - should transfer ownership when owner leaves (29 ms)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { schedule: 'Morning', drinking: 'Occasional' }
    }

      at log (src/controller/user.ts:67:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { noise: 'Moderate', profession: 'Worker' }
    }

      at log (src/controller/user.ts:67:13)

PASS src/__tests__/no-mocks/task.test.ts
  Task API - No Mocking
    ΓêÜ POST /api/task - should create a new task (380 ms)
    ΓêÜ GET /api/task - should return group tasks (49 ms)
    ΓêÜ POST /api/task - should reject invalid difficulty (27 ms)
    ΓêÜ GET /api/task/my-tasks - should return user assigned tasks (43 ms)
    ΓêÜ PUT /api/task/:id/status - should update task status (43 ms)
    ΓêÜ POST /api/task/:id/assign - should assign task to users (39 ms)
    ΓêÜ POST /api/task/assign-weekly - should auto-assign tasks (41 ms)
    ΓêÜ GET /api/task/week/:weekStart - should return tasks for week (34 ms)
    ΓêÜ GET /api/task/date/:date - should return tasks for date (27 ms)
    ΓêÜ DELETE /api/task/:id - should delete task (28 ms)
    ΓêÜ POST /api/task - should require deadline for one-time tasks (18 ms)
    ΓêÜ POST /api/task - should reject invalid requiredPeople (23 ms)
    ΓêÜ PUT /api/task/:id/status - should reject invalid status (22 ms)
    ΓêÜ POST /api/task/:id/assign - should reject empty userIds (22 ms)
    ΓêÜ POST /api/task/:id/assign - should reject non-creator assignment (34 ms)
    ΓêÜ DELETE /api/task/:id - should reject non-creator deletion (31 ms)
    ΓêÜ POST /api/task - should reject past deadline (17 ms)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: 'Test bio',
      profilePicture: undefined,
      livingPreferences: undefined
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-04T22:53:32.967Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.967Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.967Z] AUTHENTICATE: Token extracted: invalid-to...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.967Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.967Z] AUTHENTICATE: Token verification failed: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

      at log (src/middleware/auth.ts:96:13)

  console.log
    [2025-11-04T22:53:32.980Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.980Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.980Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.980Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.980Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec74c25c8eecd5c307', email: 'deletetest@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.980Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec74c25c8eecd5c307

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.980Z] AUTHENTICATE: User not found in database for ID: 690a83ec74c25c8eecd5c307

      at log (src/middleware/auth.ts:75:15)

  console.log
    [2025-11-04T22:53:32.994Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-04T22:53:32.994Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-04T22:53:32.994Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-04T22:53:32.994Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-04T22:53:32.994Z] AUTHENTICATE: Token decoded successfully: { id: '690a83ec74c25c8eecd5c30e', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-04T22:53:32.994Z] AUTHENTICATE: Fetching user from database with ID: 690a83ec74c25c8eecd5c30e

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-04T22:53:32.994Z] AUTHENTICATE: User found: {
      id: new ObjectId('690a83ec74c25c8eecd5c30e'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-04T22:53:32.994Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-04T22:53:32.999Z] DELETE USER: Starting user deletion

      at log (src/controller/user.ts:168:13)

  console.log
    [2025-11-04T22:53:32.999Z] DELETE USER: Deleting user with ID: 690a83ec74c25c8eecd5c30e

      at log (src/controller/user.ts:178:15)

  console.log
    [2025-11-04T22:53:32.999Z] DELETE USER: User deleted successfully

      at log (src/controller/user.ts:225:15)

PASS src/__tests__/no-mocks/user.test.ts
  User API - No Mocking
    ΓêÜ GET /api/user/ - should return success message when authenticated (310 ms)
    ΓêÜ PUT /api/user/users/profile - should set user profile successfully (38 ms)
    ΓêÜ PUT /api/user/users/profile - should return 400 for missing fields (11 ms)
    ΓêÜ PUT /api/user/users/profile - should reject invalid gender (11 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should update optional profile (40 ms)
    ΓêÜ DELETE /api/user/users/me - should delete user account (38 ms)
    ΓêÜ PUT /api/user/users/report - should report user (47 ms)
    ΓêÜ PUT /api/user/users/report - should return 400 for missing fields (19 ms)
    ΓêÜ PUT /api/user/users/report - should return 404 when user not found (26 ms)
    ΓêÜ PUT /api/user/users/report - should return 400 when no messages found (31 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should reject invalid living preferences (16 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should require basic profile first (11 ms)
    ΓêÜ PUT /api/user/users/profile - should return 404 when user not found (12 ms)
    ΓêÜ PUT /api/user/users/profile - should reject invalid DOB format (10 ms)
    ΓêÜ PUT /api/user/users/profile - should reject changing immutable fields (17 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should return 400 for missing email (11 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should reject bio too long (20 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should reject invalid drinking value (16 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should reject invalid partying value (13 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should reject invalid noise value (14 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should reject invalid profession value (13 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should return 404 when user not found (12 ms)
    ΓêÜ DELETE /api/user/users/me - should transfer ownership when owner deletes account (35 ms)
    ΓêÜ DELETE /api/user/users/me - should delete group when owner is last member (31 ms)
    ΓêÜ DELETE /api/user/users/me - should remove member from group (28 ms)
    ΓêÜ DELETE /api/user/users/me - should transfer ownership to oldest member by join date (35 ms)
    ΓêÜ PUT /api/user/users/report - should handle errors gracefully (103 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should update all livingPreferences fields (27 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should update partial livingPreferences (25 ms)
    ΓêÜ PUT /api/user/users/profile - should handle database errors (10 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should handle database errors (16 ms)
    ΓêÜ DELETE /api/user/users/me - should return 401 when user not authenticated (10 ms)
    ΓêÜ DELETE /api/user/users/me - should handle user not found after deletion (16 ms)
    ΓêÜ DELETE /api/user/users/me - should handle errors during deletion (14 ms)

FAIL src/__tests__/no-mocks/chat.test.ts
  ΓùÅ Test suite failed to run

    [96msrc/__tests__/no-mocks/chat.test.ts[0m:[93m395[0m:[93m10[0m - [91merror[0m[90m TS2339: [0mProperty 
'addVote' does not exist on type 'Document<unknown, {}, IMessage, {}, {}> & IMessage & Required<{ _id: string; }> & { 
__v: number; }'.

    [7m395[0m     poll.addVote(testUser._id.toString(), 'Yes');
    [7m   [0m [91m         ~~~~~~~[0m
    [96msrc/__tests__/no-mocks/chat.test.ts[0m:[93m428[0m:[93m10[0m - [91merror[0m[90m TS2339: [0mProperty 
'addVote' does not exist on type 'Document<unknown, {}, IMessage, {}, {}> & IMessage & Required<{ _id: string; }> & { 
__v: number; }'.

    [7m428[0m     poll.addVote(testUser._id.toString(), 'No');
    [7m   [0m [91m         ~~~~~~~[0m
    [96msrc/__tests__/no-mocks/chat.test.ts[0m:[93m450[0m:[93m19[0m - [91merror[0m[90m TS2339: [0mProperty 
'addVote' does not exist on type 'Document<unknown, {}, IMessage, {}, {}> & IMessage & Required<{ _id: string; }> & { 
__v: number; }'.

    [7m450[0m       textMessage.addVote(testUser._id.toString(), 'Yes');
    [7m   [0m [91m                  ~~~~~~~[0m
    [96msrc/__tests__/no-mocks/chat.test.ts[0m:[93m474[0m:[93m19[0m - [91merror[0m[90m TS2339: [0mProperty 
'addVote' does not exist on type 'Document<unknown, {}, IMessage, {}, {}> & IMessage & Required<{ _id: string; }> & { 
__v: number; }'.

    [7m474[0m       expiredPoll.addVote(testUser._id.toString(), 'Yes');
    [7m   [0m [91m                  ~~~~~~~[0m
    [96msrc/__tests__/no-mocks/chat.test.ts[0m:[93m501[0m:[93m27[0m - [91merror[0m[90m TS2339: [0mProperty 
'hasUserVoted' does not exist on type 'Document<unknown, {}, IMessage, {}, {}> & IMessage & Required<{ _id: string; }> 
& { __v: number; }'.

    [7m501[0m     const hasVoted = poll.hasUserVoted(testUser._id.toString());
    [7m   [0m [91m                          ~~~~~~~~~~~~[0m
    [96msrc/__tests__/no-mocks/chat.test.ts[0m:[93m535[0m:[93m27[0m - [91merror[0m[90m TS2339: [0mProperty 
'hasUserVoted' does not exist on type 'Document<unknown, {}, IMessage, {}, {}> & IMessage & Required<{ _id: string; }> 
& { __v: number; }'.

    [7m535[0m     const hasVoted = poll.hasUserVoted(otherUser._id.toString());
    [7m   [0m [91m                          ~~~~~~~~~~~~[0m
    [96msrc/__tests__/no-mocks/chat.test.ts[0m:[93m535[0m:[93m40[0m - [91merror[0m[90m TS18046: 
[0m'otherUser._id' is of type 'unknown'.

    [7m535[0m     const hasVoted = poll.hasUserVoted(otherUser._id.toString());
    [7m   [0m [91m                                       ~~~~~~~~~~~~~[0m
    [96msrc/__tests__/no-mocks/chat.test.ts[0m:[93m552[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 
'hasUserVoted' does not exist on type 'Document<unknown, {}, IMessage, {}, {}> & IMessage & Required<{ _id: string; }> 
& { __v: number; }'.

    [7m552[0m     const hasVoted = textMessage.hasUserVoted(testUser._id.toString());
    [7m   [0m [91m                                 ~~~~~~~~~~~~[0m
    [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics

FAIL src/__tests__/no-mocks/rating.test.ts
  ΓùÅ Test suite failed to run

    [96msrc/__tests__/no-mocks/rating.test.ts[0m:[93m344[0m:[93m22[0m - [91merror[0m[90m TS18046: 
[0m'newUser._id' is of type 'unknown'.

    [7m344[0m         ratedUserId: newUser._id.toString(),
    [7m   [0m [91m                     ~~~~~~~~~~~[0m
    [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics

Failed to collect coverage from C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\socket\socketHandler.ts
ERROR: [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
STACK: 
Failed to collect coverage from 
C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\scripts\updateGroupMembersForRatingTest.ts
ERROR: [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
STACK: 
Failed to collect coverage from C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\routes\chat.ts
ERROR: [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
STACK: 
Failed to collect coverage from C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\services\authService.ts
ERROR: [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
STACK: 
Failed to collect coverage from C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\models\Rating.ts
ERROR: [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
STACK: 
Failed to collect coverage from C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\scripts\purgeDatabase.ts
ERROR: [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
STACK: 
Failed to collect coverage from C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\routes\rating.ts
ERROR: [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
STACK: 
-------------|---------|----------|---------|---------|-----------------------------------------------------------------------------------------------------
File         | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                   
-------------|---------|----------|---------|---------|-----------------------------------------------------------------------------------------------------
All files    |   80.97 |    72.72 |   69.01 |   81.54 |                                                                                                     
 controller  |   90.24 |    93.51 |     100 |   90.44 |                                                                                                     
  auth.ts    |     100 |     87.5 |     100 |     100 | 14                                                                                                  
  report.ts  |   85.71 |     92.3 |     100 |   85.18 | 104-108                                                                                             
  user.ts    |   88.99 |    94.25 |     100 |   89.62 | 57-58,124,161-162,174-175,221-222,232-233                                                           
 middleware  |     100 |    94.44 |     100 |     100 |                                                                                                     
  auth.ts    |     100 |    94.44 |     100 |     100 | 21                                                                                                  
 models      |   67.02 |    26.31 |   47.82 |   69.66 |                                                                                                     
  Group.ts   |   95.23 |     62.5 |     100 |   95.23 | 62                                                                                                  
  Message.ts |   35.89 |        0 |      10 |      40 | 69-83,88-89,94-95,106-120,129-132                                                                   
  Task.ts    |   83.33 |    83.33 |   66.66 |   82.75 | 62,122-128                                                                                          
  User.ts    |     100 |      100 |     100 |     100 |                                                                                                     
 routes      |   77.86 |    63.75 |   71.42 |   78.21 |                                                                                                     
  auth.ts    |     100 |      100 |     100 |     100 |                                                                                                     
  group.ts   |   72.91 |    55.07 |   68.75 |   72.91 | 39-40,91-92,105,135,195-264,279-288,304,313-314,337,353,402,410,431,466                             
  task.ts    |   81.25 |    70.32 |   72.22 |   82.08 | 20,61,82-93,129-130,160,214,227,237,271,283,307,343,358,378,383,388-389,405,442,454,483,495,527,539 
  user.ts    |     100 |      100 |     100 |     100 |                                                                                                     
 services    |    82.6 |    92.85 |     100 |    82.6 |                                                                                                     
  auth.ts    |    82.6 |    92.85 |     100 |    82.6 | 35-36,67-68                                                                                         
-------------|---------|----------|---------|---------|-----------------------------------------------------------------------------------------------------
Test Suites: 2 failed, 7 passed, 9 total
Tests:       90 passed, 90 total
Snapshots:   0 total
Time:        10.471 s
Ran all test suites.
