
> roomsync-backend@1.0.0 test:coverage
> jest --coverage

  console.log
    Final configuration: { PORT: 4000, GOOGLE_CLIENT_ID: '[SET]', JWT_SECRET: '[SET]' }

      at Object.<anonymous> (src/config.ts:41:9)

  console.log
    Final configuration: { PORT: 4000, GOOGLE_CLIENT_ID: '[SET]', JWT_SECRET: '[SET]' }

      at Object.<anonymous> (src/config.ts:41:9)

  console.log
    Final configuration: { PORT: 4000, GOOGLE_CLIENT_ID: '[SET]', JWT_SECRET: '[SET]' }

      at Object.<anonymous> (src/config.ts:41:9)

  console.log
    Final configuration: { PORT: 4000, GOOGLE_CLIENT_ID: '[SET]', JWT_SECRET: '[SET]' }

      at Object.<anonymous> (src/config.ts:41:9)

  console.log
    Final configuration: { PORT: 4000, GOOGLE_CLIENT_ID: '[SET]', JWT_SECRET: '[SET]' }

      at Object.<anonymous> (src/config.ts:41:9)

  console.log
    Logging in user with email: existing@example.com

      at Object.log [as login] (src/services/auth.ts:42:15)

  console.log
    Logging in user with email: nonexistent@example.com

      at Object.log [as login] (src/services/auth.ts:42:15)

  console.log
    Logging in user with email: logintest@example.com

      at Object.log [as login] (src/services/auth.ts:42:15)

npm : PASS src/__tests__/no-mocks/services.test.ts
At C:\Users\andy2\AppData\Local\Temp\ps-script-7f8f0d99-3924-4fb6-ba6f-1e6cac77fab5.ps1:87 char:23
+ Set-Location backend; npm run test:coverage 2>&1 | Out-File -FilePath ...
+                       ~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (PASS src/__test...ervices.test.ts:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
  AuthService - No Mocking
    ΓêÜ signup - should create new user successfully (190 ms)
    ΓêÜ signup - should reject existing user (9 ms)
    ΓêÜ login - should login existing user successfully (9 ms)
    ΓêÜ login - should reject non-existent user (5 ms)
    ΓêÜ signup - should handle errors gracefully (7 ms)
    ΓêÜ login - should handle errors gracefully (7 ms)

PASS src/__tests__/no-mocks/health.test.ts
  Health Check API - No Mocking
    ΓêÜ GET /api/health - should return health status (25 ms)

  console.log
    [2025-11-05T04:56:25.016Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.016Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.016Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.016Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.016Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f82364a34addbbcb4b', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.016Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f82364a34addbbcb4b

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.016Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f82364a34addbbcb4b'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.016Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.043Z] GROUP CREATE: Starting group creation

      at log (src/routes/group.ts:18:11)

  console.log
    [2025-11-05T04:56:25.043Z] GROUP CREATE: User: {
      _id: '690ad8f82364a34addbbcb4b',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/group.ts:19:11)

  console.log
    [2025-11-05T04:56:25.043Z] GROUP CREATE: Request body: { name: 'Test Group' }

      at log (src/routes/group.ts:20:11)

  console.log
    [2025-11-05T04:56:25.043Z] GROUP CREATE: Checking if user is already in a group

      at log (src/routes/group.ts:32:11)

  console.log
    [2025-11-05T04:56:25.043Z] GROUP CREATE: Creating new group with name: Test Group

      at log (src/routes/group.ts:46:11)

  console.log
    [2025-11-05T04:56:25.043Z] GROUP CREATE: Group created successfully: new ObjectId('690ad8f92364a34addbbcb52')

      at log (src/routes/group.ts:57:11)

  console.log
    [2025-11-05T04:56:25.043Z] GROUP CREATE: Updating user's groupName to: Test Group

      at log (src/routes/group.ts:58:11)

  console.log
    [2025-11-05T04:56:25.043Z] GROUP CREATE: Populating group with owner and member details

      at log (src/routes/group.ts:64:11)

  console.error
    Error: Invalid token
        at Object.<anonymous> (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\__tests__\no-mocks\auth.test.ts:50:17)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\jest-mock\build\index.js:305:39
        at Object.<anonymous> (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\jest-mock\build\index.js:312:13)
        at Object.mockConstructor [as verifyIdToken] (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\jest-mock\build\index.js:102:19)
        at verifyIdToken (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\auth.ts:8:31)
        at verifyGoogleToken (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\auth.ts:26:47)
        at Layer.handleRequest (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\layer.js:152:17)
        at next (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\route.js:157:13)
        at Route.dispatch (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\route.js:117:3)
        at handle (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:435:11)
        at Layer.handleRequest (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\layer.js:152:17)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:295:15
        at processParams (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:582:12)
        at next (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:291:5)
        at Function.handle (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:186:3)
        at router (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:60:12)
        at Layer.handleRequest (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\layer.js:152:17)
        at trimPrefix (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:342:13)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:297:9
        at processParams (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:582:12)
        at next (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:291:5)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\body-parser\lib\read.js:132:5
        at AsyncResource.runInAsyncScope (node:async_hooks:203:9)
        at invokeCallback (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\raw-body\index.js:238:16)
        at done (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:517:28)
        at endReadableNT (node:internal/streams/readable:1368:12)
        at processTicksAndRejections (node:internal/process/task_queues:82:21)

      28 |       return res.json(result);
      29 |     } catch (err) {
    > 30 |       console.error(err);
         |               ^
      31 |       res.status(401).json({ success: false, message: "Signup failed: Invalid Google token" });
      32 |     }
      33 |   },

      at error (src/controller/auth.ts:30:15)

  console.log
    [2025-11-05T04:56:25.043Z] GROUP CREATE: Group creation completed successfully

      at log (src/routes/group.ts:69:11)

  console.log
    [2025-11-05T04:56:25.043Z] GROUP CREATE: Group code generated: M97X

      at log (src/routes/group.ts:70:11)

  console.log
    [2025-11-05T04:56:25.043Z] GROUP CREATE: Sending response with group data

      at log (src/routes/group.ts:71:11)

  console.log
    [2025-11-05T04:56:25.122Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.122Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.122Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.122Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.122Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcb5b', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.122Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcb5b

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.122Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcb5b'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.122Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.132Z] GROUP CREATE: Starting group creation

      at log (src/routes/group.ts:18:11)

  console.log
    [2025-11-05T04:56:25.132Z] GROUP CREATE: User: {
      _id: '690ad8f92364a34addbbcb5b',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/group.ts:19:11)

  console.log
    [2025-11-05T04:56:25.132Z] GROUP CREATE: Request body: { name: '' }

      at log (src/routes/group.ts:20:11)

  console.log
    [2025-11-05T04:56:25.132Z] GROUP CREATE: Validation failed - group name is required

      at log (src/routes/group.ts:25:13)

  console.error
    Error: Invalid token
        at Object.<anonymous> (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\__tests__\no-mocks\auth.test.ts:50:17)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\jest-mock\build\index.js:305:39
        at Object.<anonymous> (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\jest-mock\build\index.js:312:13)
        at Object.mockConstructor [as verifyIdToken] (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\jest-mock\build\index.js:102:19)
        at verifyIdToken (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\auth.ts:8:31)
        at verifyGoogleToken (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\auth.ts:40:31)
        at Layer.handleRequest (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\layer.js:152:17)
        at next (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\route.js:157:13)
        at Route.dispatch (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\route.js:117:3)
        at handle (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:435:11)
        at Layer.handleRequest (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\layer.js:152:17)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:295:15
        at processParams (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:582:12)
        at next (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:291:5)
        at Function.handle (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:186:3)
        at router (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:60:12)
        at Layer.handleRequest (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\lib\layer.js:152:17)
        at trimPrefix (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:342:13)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:297:9
        at processParams (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:582:12)
        at next (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\router\index.js:291:5)
        at C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\body-parser\lib\read.js:132:5
        at AsyncResource.runInAsyncScope (node:async_hooks:203:9)
        at invokeCallback (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\raw-body\index.js:238:16)
        at done (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:517:28)
        at endReadableNT (node:internal/streams/readable:1368:12)
        at processTicksAndRejections (node:internal/process/task_queues:82:21)

      42 |       return res.json(result);
      43 |     } catch (err) {
    > 44 |       console.error(err);
         |               ^
      45 |       res.status(401).json({ success: false, message: "Login failed: Invalid Google token" });
      46 |     }
      47 |   },

      at error (src/controller/auth.ts:44:15)

  console.log
    [2025-11-05T04:56:25.149Z] AUTHENTICATE: Starting authentication for GET /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.149Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.149Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.149Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.149Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcb60', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.149Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcb60

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.149Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcb60'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Test Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.149Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.158Z] GROUP GET: Getting group for user: 690ad8f92364a34addbbcb60

      at log (src/routes/group.ts:171:11)

  console.log
    [2025-11-05T04:56:25.158Z] GROUP GET: Group found: new ObjectId('690ad8f92364a34addbbcb62')

      at log (src/routes/group.ts:186:13)

  console.log
    [2025-11-05T04:56:25.158Z] GROUP GET: Owner populated successfully

      at log (src/routes/group.ts:191:15)

  console.log
    [2025-11-05T04:56:25.158Z] GROUP GET: Members populated successfully

      at log (src/routes/group.ts:277:15)

  console.log
    [2025-11-05T04:56:25.158Z] GROUP GET: Member join durations:

      at log (src/routes/group.ts:292:13)

  console.log
    [2025-11-05T04:56:25.158Z]   - User Test User (690ad8f92364a34addbbcb60): 0 days, 0 hours, 0 minutes (joined: 2025-11-05T04:56:25.142Z)

      at log (src/routes/group.ts:302:17)
          at Proxy.forEach (<anonymous>)

  console.log
    [2025-11-05T04:56:25.180Z] AUTHENTICATE: Starting authentication for POST /join

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.180Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.180Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.180Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.180Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcb6e', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.180Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcb6e

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.180Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcb6e'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.180Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.189Z] GROUP JOIN: Starting group join process

      at log (src/routes/group.ts:84:11)

  console.log
    [2025-11-05T04:56:25.189Z] GROUP JOIN: User: {
      _id: '690ad8f92364a34addbbcb6e',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/group.ts:85:11)

  console.log
    [2025-11-05T04:56:25.189Z] GROUP JOIN: Request body: { groupCode: 'ABCD' }

      at log (src/routes/group.ts:86:11)

  console.log
    [2025-11-05T04:56:25.189Z] GROUP JOIN: Checking if user is already in a group

      at log (src/routes/group.ts:98:11)

  console.log
    [2025-11-05T04:56:25.191Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.191Z] AUTHENTICATE: Authorization header: Missing

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.191Z] AUTHENTICATE: No valid token provided

      at log (src/middleware/auth.ts:16:13)

  console.log
    [2025-11-05T04:56:25.189Z] GROUP JOIN: Join successful, sending response

      at log (src/routes/group.ts:158:11)

  console.log
    Logging in user with email: existing@example.com

      at Object.log [as login] (src/services/auth.ts:42:15)

  console.error
    Error: Invalid token
        at verifyGoogleToken (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\auth.ts:13:23)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at signup (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\auth.ts:26:41)

      28 |       return res.json(result);
      29 |     } catch (err) {
    > 30 |       console.error(err);
         |               ^
      31 |       res.status(401).json({ success: false, message: "Signup failed: Invalid Google token" });
      32 |     }
      33 |   },

      at error (src/controller/auth.ts:30:15)

  console.log
    [2025-11-05T04:56:25.219Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.219Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.219Z] AUTHENTICATE: No valid token provided

      at log (src/middleware/auth.ts:16:13)

  console.log
    [2025-11-05T04:56:25.222Z] AUTHENTICATE: Starting authentication for DELETE /leave

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.222Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.222Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.222Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.222Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcb80', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.222Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcb80

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.222Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcb80'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Test Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.222Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    [2025-11-05T04:56:25.237Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: 'This is a test bio',
      profilePicture: undefined,
      livingPreferences: undefined
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-05T04:56:25.237Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.237Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.237Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.237Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f9633037ec0d76587d', email: 'test@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.237Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f9633037ec0d76587d

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.237Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f9633037ec0d76587d'),
      email: 'test@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.237Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.255Z] AUTHENTICATE: Starting authentication for PUT /transfer-ownership/690ad8f92364a34addbbcb91

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.255Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.255Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.255Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.255Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcb8f', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.258Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.255Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcb8f

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.258Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.258Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.255Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcb8f'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.255Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.258Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.263Z] ===== TRANSFER OWNERSHIP ROUTE HIT =====

      at log (src/routes/group.ts:326:11)

  console.log
    [2025-11-05T04:56:25.263Z] Method: PUT, Original URL: /api/group/transfer-ownership/690ad8f92364a34addbbcb91, Path: /transfer-ownership/690ad8f92364a34addbbcb91, Params: [Object: null prototype] { newOwnerId: '690ad8f92364a34addbbcb91' }

      at log (src/routes/group.ts:327:11)

  console.log
    [2025-11-05T04:56:25.263Z] GROUP TRANSFER OWNERSHIP: Transferring ownership to 690ad8f92364a34addbbcb91

      at log (src/routes/group.ts:329:11)

  console.log
    [2025-11-05T04:56:25.258Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f97b81d8d3a73963f8', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.258Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f97b81d8d3a73963f8

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.267Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.267Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.267Z] AUTHENTICATE: Token extracted: invalid-to...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.263Z] GROUP TRANSFER OWNERSHIP: Ownership transferred successfully

      at log (src/routes/group.ts:375:11)

  console.log
    [2025-11-05T04:56:25.267Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.258Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f97b81d8d3a73963f8'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.267Z] AUTHENTICATE: Token verification failed: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

      at log (src/middleware/auth.ts:96:13)

  console.log
    [2025-11-05T04:56:25.258Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.272Z] DELETE USER: Starting user deletion

      at log (src/controller/user.ts:168:13)

  console.log
    [2025-11-05T04:56:25.272Z] DELETE USER: Deleting user with ID: 690ad8f97b81d8d3a73963f8

      at log (src/controller/user.ts:178:15)

  console.log
    [2025-11-05T04:56:25.272Z] DELETE USER: User deleted successfully

      at log (src/controller/user.ts:225:15)

  console.log
    [2025-11-05T04:56:25.282Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.282Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.282Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.282Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.282Z] AUTHENTICATE: Token decoded successfully: { id: '507f1f77bcf86cd799439011', email: 'fake@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.282Z] AUTHENTICATE: Fetching user from database with ID: 507f1f77bcf86cd799439011

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.287Z] AUTHENTICATE: Starting authentication for PUT /transfer-ownership/690ad8f92364a34addbbcba1

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.287Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.287Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.287Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.287Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcba1', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.287Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcba1

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.287Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcba1'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.282Z] AUTHENTICATE: User not found in database for ID: 507f1f77bcf86cd799439011

      at log (src/middleware/auth.ts:75:15)

  console.log
    [2025-11-05T04:56:25.287Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.294Z] ===== TRANSFER OWNERSHIP ROUTE HIT =====

      at log (src/routes/group.ts:326:11)

  console.log
    [2025-11-05T04:56:25.294Z] Method: PUT, Original URL: /api/group/transfer-ownership/690ad8f92364a34addbbcba1, Path: /transfer-ownership/690ad8f92364a34addbbcba1, Params: [Object: null prototype] { newOwnerId: '690ad8f92364a34addbbcba1' }

      at log (src/routes/group.ts:327:11)

  console.log
    [2025-11-05T04:56:25.294Z] GROUP TRANSFER OWNERSHIP: Transferring ownership to 690ad8f92364a34addbbcba1

      at log (src/routes/group.ts:329:11)

  console.log
    [2025-11-05T04:56:25.300Z] AUTHENTICATE: Starting authentication for PUT /users/report

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.300Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.300Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.300Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.300Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f97b81d8d3a7396401', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.305Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.300Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f97b81d8d3a7396401

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.305Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.305Z] AUTHENTICATE: Token extracted: bypass-tok...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.305Z] AUTHENTICATE: Using bypass token for test user 1

      at log (src/middleware/auth.ts:26:15)

  console.log
    [2025-11-05T04:56:25.300Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f97b81d8d3a7396401'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.300Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.305Z] AUTHENTICATE: Bypass authentication successful for user 1

      at log (src/middleware/auth.ts:40:15)

  console.log
    [2025-11-05T04:56:25.314Z] AUTHENTICATE: Starting authentication for DELETE /member/690ad8f92364a34addbbcbb2

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.314Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.314Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.314Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    Found 1 messages from user 690ad8f97b81d8d3a7396403

      at log (src/controller/report.ts:40:15)

  console.log
    User 690ad8f97b81d8d3a7396403 not marked as offensive - messages deemed acceptable

      at log (src/controller/report.ts:110:17)

  console.log
    [2025-11-05T04:56:25.314Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcbb0', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

PASS src/__tests__/no-mocks/auth.test.ts
  Auth API - No Mocking
    ΓêÜ POST /api/auth/signup - should fail with invalid Google token (no mocking) (69 ms)
    ΓêÜ POST /api/auth/signup - should return 400 for missing token (6 ms)
    ΓêÜ POST /api/auth/login - should return 400 for missing token (6 ms)
    ΓêÜ POST /api/auth/login - should fail with invalid Google token (no mocking) (10 ms)
    ΓêÜ POST /api/auth/signup - should return 400 for empty token string (10 ms)
    ΓêÜ POST /api/auth/login - should return 400 for empty token string (15 ms)
    ΓêÜ POST /api/auth/signup - should successfully signup with valid token (30 ms)
    ΓêÜ POST /api/auth/login - should successfully login with valid token (16 ms)
    ΓêÜ POST /api/auth/signup - should handle null payload from Google token (7 ms)

  console.log
    [2025-11-05T04:56:25.314Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcbb0

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.319Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.319Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.319Z] AUTHENTICATE: Token extracted: bypass-tok...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.319Z] AUTHENTICATE: Using bypass token for test user 2

      at log (src/middleware/auth.ts:46:15)

  console.log
    [2025-11-05T04:56:25.319Z] AUTHENTICATE: Bypass authentication successful for user 2

      at log (src/middleware/auth.ts:60:15)

  console.log
    [2025-11-05T04:56:25.314Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcbb0'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.314Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.325Z] GROUP REMOVE MEMBER: Removing member 690ad8f92364a34addbbcbb2 from group

      at log (src/routes/group.ts:394:11)

  console.log
    [2025-11-05T04:56:25.329Z] AUTHENTICATE: Starting authentication for PUT /users/report

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.329Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.329Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.329Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.329Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f97b81d8d3a7396413', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.334Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.329Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f97b81d8d3a7396413

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.334Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.334Z] AUTHENTICATE: Token extracted: bypass-tok...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.325Z] GROUP REMOVE MEMBER: Successfully removed member 690ad8f92364a34addbbcbb2

      at log (src/routes/group.ts:448:11)

  console.log
    [2025-11-05T04:56:25.334Z] AUTHENTICATE: Using bypass token for test user 1

      at log (src/middleware/auth.ts:26:15)

  console.log
    [2025-11-05T04:56:25.329Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f97b81d8d3a7396413'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.329Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.334Z] AUTHENTICATE: Test user 1 not found in database

      at log (src/middleware/auth.ts:29:17)

  console.log
    [2025-11-05T04:56:25.350Z] AUTHENTICATE: Starting authentication for GET /protected

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.350Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.350Z] AUTHENTICATE: Token extracted: bypass-tok...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.350Z] AUTHENTICATE: Using bypass token for test user 2

      at log (src/middleware/auth.ts:46:15)

  console.log
    [2025-11-05T04:56:25.354Z] AUTHENTICATE: Starting authentication for PUT /users/report

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.354Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.354Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.350Z] AUTHENTICATE: Test user 2 not found in database

      at log (src/middleware/auth.ts:49:17)

  console.log
    [2025-11-05T04:56:25.354Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.354Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f97b81d8d3a7396419', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.354Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f97b81d8d3a7396419

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.354Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f97b81d8d3a7396419'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.354Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.364Z] AUTHENTICATE: Starting authentication for POST /join

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.364Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.364Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.364Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.364Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcbc3', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.364Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcbc3

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.364Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcbc3'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.364Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.373Z] GROUP JOIN: Starting group join process

      at log (src/routes/group.ts:84:11)

  console.log
    [2025-11-05T04:56:25.373Z] GROUP JOIN: User: {
      _id: '690ad8f92364a34addbbcbc3',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/group.ts:85:11)

  console.log
    [2025-11-05T04:56:25.373Z] GROUP JOIN: Request body: { groupCode: 'FULL' }

      at log (src/routes/group.ts:86:11)

  console.log
    [2025-11-05T04:56:25.373Z] GROUP JOIN: Checking if user is already in a group

      at log (src/routes/group.ts:98:11)

  console.log
    [2025-11-05T04:56:25.386Z] AUTHENTICATE: Starting authentication for PUT /users/report

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.386Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.386Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.388Z] AUTHENTICATE: Starting authentication for POST /join

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.388Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.386Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.388Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.388Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.386Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f97b81d8d3a7396425', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.386Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f97b81d8d3a7396425

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.388Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcbee', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.388Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcbee

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.386Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f97b81d8d3a7396425'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.388Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcbee'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.388Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.386Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.395Z] GROUP JOIN: Starting group join process

      at log (src/routes/group.ts:84:11)

  console.log
    [2025-11-05T04:56:25.395Z] GROUP JOIN: User: {
      _id: '690ad8f92364a34addbbcbee',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/group.ts:85:11)

  console.log
    [2025-11-05T04:56:25.395Z] GROUP JOIN: Request body: { groupCode: 'INVALID' }

      at log (src/routes/group.ts:86:11)

  console.log
    [2025-11-05T04:56:25.395Z] GROUP JOIN: Checking if user is already in a group

      at log (src/routes/group.ts:98:11)

  console.log
    Found 0 messages from user 690ad8f97b81d8d3a7396427

      at log (src/controller/report.ts:40:15)

  console.log
    [2025-11-05T04:56:25.411Z] AUTHENTICATE: Starting authentication for GET /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.411Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.411Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.411Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.411Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcbf5', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    [2025-11-05T04:56:25.411Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcbf5

      at log (src/middleware/auth.ts:71:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { schedule: 'InvalidSchedule' }
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-05T04:56:25.411Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcbf5'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.411Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.421Z] GROUP GET: Getting group for user: 690ad8f92364a34addbbcbf5

      at log (src/routes/group.ts:171:11)

  console.log
    [2025-11-05T04:56:25.421Z] GROUP GET: User is not a member of any group

      at log (src/routes/group.ts:179:15)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'newuser@example.com',
      bio: 'Test bio',
      profilePicture: undefined,
      livingPreferences: undefined
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-05T04:56:25.436Z] AUTHENTICATE: Starting authentication for PUT /transfer-ownership/690ad8f92364a34addbbcbfd

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.436Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.436Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.436Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.436Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcbfb', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.436Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcbfb

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.436Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcbfb'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.436Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.443Z] ===== TRANSFER OWNERSHIP ROUTE HIT =====

      at log (src/routes/group.ts:326:11)

  console.log
    [2025-11-05T04:56:25.443Z] Method: PUT, Original URL: /api/group/transfer-ownership/690ad8f92364a34addbbcbfd, Path: /transfer-ownership/690ad8f92364a34addbbcbfd, Params: [Object: null prototype] { newOwnerId: '690ad8f92364a34addbbcbfd' }

      at log (src/routes/group.ts:327:11)

  console.log
    [2025-11-05T04:56:25.443Z] GROUP TRANSFER OWNERSHIP: Transferring ownership to 690ad8f92364a34addbbcbfd

      at log (src/routes/group.ts:329:11)

  console.log
    [2025-11-05T04:56:25.457Z] AUTHENTICATE: Starting authentication for DELETE /member/690ad8f92364a34addbbcc08

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.457Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

PASS src/__tests__/no-mocks/middleware.test.ts
  Authentication Middleware - No Mocking
    ΓêÜ should reject request without Authorization header (160 ms)
    ΓêÜ should reject invalid Authorization format (13 ms)
    ΓêÜ should authenticate with valid JWT token (33 ms)
    ΓêÜ should reject invalid JWT token (13 ms)
    ΓêÜ should reject when user not found in database (25 ms)
    ΓêÜ should authenticate with bypass-token for test user 1 (15 ms)
    ΓêÜ should authenticate with bypass-token-2 for test user 2 (13 ms)
    ΓêÜ should reject bypass-token when test user not found (17 ms)
    ΓêÜ should reject bypass-token-2 when test user 2 not found (16 ms)

  console.log
    [2025-11-05T04:56:25.457Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.457Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.457Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcc08', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.457Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcc08

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.457Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcc08'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.457Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.464Z] GROUP REMOVE MEMBER: Removing member 690ad8f92364a34addbbcc08 from group

      at log (src/routes/group.ts:394:11)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: undefined,
      bio: 'Test bio',
      profilePicture: undefined,
      livingPreferences: undefined
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-05T04:56:25.477Z] AUTHENTICATE: Starting authentication for DELETE /leave

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.477Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.477Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.477Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.477Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcc13', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.477Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcc13

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.477Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcc13'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Test Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.477Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa',
      profilePicture: undefined,
      livingPreferences: undefined
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-05T04:56:25.502Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.502Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.502Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.502Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.502Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcc28', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.502Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcc28

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.502Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcc28'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Existing Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.502Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    [2025-11-05T04:56:25.508Z] GROUP CREATE: Starting group creation

      at log (src/routes/group.ts:18:11)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { drinking: 'InvalidDrinking' }
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-05T04:56:25.508Z] GROUP CREATE: User: {
      _id: '690ad8f92364a34addbbcc28',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Existing Group'
    }

      at log (src/routes/group.ts:19:11)

  console.log
    [2025-11-05T04:56:25.508Z] GROUP CREATE: Request body: { name: 'New Group' }

      at log (src/routes/group.ts:20:11)

  console.log
    [2025-11-05T04:56:25.508Z] GROUP CREATE: Checking if user is already in a group

      at log (src/routes/group.ts:32:11)

  console.log
    [2025-11-05T04:56:25.508Z] GROUP CREATE: User already in group: new ObjectId('690ad8f92364a34addbbcc2a')

      at log (src/routes/group.ts:39:13)

  console.log
    [2025-11-05T04:56:25.519Z] AUTHENTICATE: Starting authentication for POST /join

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.519Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.519Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.519Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    [2025-11-05T04:56:25.519Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcc34', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { partying: 'InvalidPartying' }
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-05T04:56:25.519Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcc34

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.519Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcc34'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.519Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.526Z] GROUP JOIN: Starting group join process

      at log (src/routes/group.ts:84:11)

  console.log
    [2025-11-05T04:56:25.526Z] GROUP JOIN: User: {
      _id: '690ad8f92364a34addbbcc34',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/group.ts:85:11)

  console.log
    [2025-11-05T04:56:25.526Z] GROUP JOIN: Request body: { groupCode: '' }

      at log (src/routes/group.ts:86:11)

  console.log
    [2025-11-05T04:56:25.526Z] GROUP JOIN: Validation failed - group code is required

      at log (src/routes/group.ts:91:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { noise: 'InvalidNoise' }
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-05T04:56:25.543Z] AUTHENTICATE: Starting authentication for POST /join

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.543Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.543Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.543Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.543Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcc39', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.543Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcc39

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.543Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcc39'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Existing Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.543Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.550Z] GROUP JOIN: Starting group join process

      at log (src/routes/group.ts:84:11)

  console.log
    [2025-11-05T04:56:25.550Z] GROUP JOIN: User: {
      _id: '690ad8f92364a34addbbcc39',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Existing Group'
    }

      at log (src/routes/group.ts:85:11)

  console.log
    [2025-11-05T04:56:25.550Z] GROUP JOIN: Request body: { groupCode: 'TARG' }

      at log (src/routes/group.ts:86:11)

  console.log
    [2025-11-05T04:56:25.550Z] GROUP JOIN: Checking if user is already in a group

      at log (src/routes/group.ts:98:11)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { profession: 'InvalidProfession' }
    }

      at log (src/controller/user.ts:67:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'nonexistent@example.com',
      bio: 'Test bio',
      profilePicture: undefined,
      livingPreferences: undefined
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-05T04:56:25.565Z] AUTHENTICATE: Starting authentication for POST /join

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.565Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.565Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.565Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.565Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcc49', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.565Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcc49

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.565Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcc49'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Test Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.565Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.575Z] GROUP JOIN: Starting group join process

      at log (src/routes/group.ts:84:11)

  console.log
    [2025-11-05T04:56:25.575Z] GROUP JOIN: User: {
      _id: '690ad8f92364a34addbbcc49',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Test Group'
    }

      at log (src/routes/group.ts:85:11)

  console.log
    [2025-11-05T04:56:25.575Z] GROUP JOIN: Request body: { groupCode: 'ABCD' }

      at log (src/routes/group.ts:86:11)

  console.log
    [2025-11-05T04:56:25.575Z] GROUP JOIN: Checking if user is already in a group

      at log (src/routes/group.ts:98:11)

  console.log
    [2025-11-05T04:56:25.582Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.582Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.582Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.582Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.582Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f97b81d8d3a7396486', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.582Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f97b81d8d3a7396486

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.582Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f97b81d8d3a7396486'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.582Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.589Z] DELETE USER: Starting user deletion

      at log (src/controller/user.ts:168:13)

  console.log
    [2025-11-05T04:56:25.589Z] DELETE USER: Deleting user with ID: 690ad8f97b81d8d3a7396486

      at log (src/controller/user.ts:178:15)

  console.log
    [2025-11-05T04:56:25.589Z] DELETE USER: Removing user from group 690ad8f97b81d8d3a739648a

      at log (src/controller/user.ts:183:17)

  console.log
    [2025-11-05T04:56:25.589Z] DELETE USER: Transferred ownership to oldest member 690ad8f97b81d8d3a7396488 (joined: Mon Jan 01 2024 16:00:00 GMT-0800 (Pacific Standard Time))

      at log (src/controller/user.ts:199:21)

  console.log
    [2025-11-05T04:56:25.589Z] DELETE USER: Updated new owner's groupName to Test Group

      at log (src/controller/user.ts:203:21)

  console.log
    [2025-11-05T04:56:25.589Z] DELETE USER: User deleted successfully

      at log (src/controller/user.ts:225:15)

  console.log
    [2025-11-05T04:56:25.602Z] AUTHENTICATE: Starting authentication for PUT /transfer-ownership/690ad8f92364a34addbbcc5a

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.602Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.602Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.602Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.602Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcc58', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.602Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcc58

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.602Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcc58'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.602Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.609Z] ===== TRANSFER OWNERSHIP ROUTE HIT =====

      at log (src/routes/group.ts:326:11)

  console.log
    [2025-11-05T04:56:25.609Z] Method: PUT, Original URL: /api/group/transfer-ownership/690ad8f92364a34addbbcc5a, Path: /transfer-ownership/690ad8f92364a34addbbcc5a, Params: [Object: null prototype] { newOwnerId: '690ad8f92364a34addbbcc5a' }

      at log (src/routes/group.ts:327:11)

  console.log
    [2025-11-05T04:56:25.609Z] GROUP TRANSFER OWNERSHIP: Transferring ownership to 690ad8f92364a34addbbcc5a

      at log (src/routes/group.ts:329:11)

  console.log
    [2025-11-05T04:56:25.611Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.611Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.611Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.611Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.611Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f97b81d8d3a739649c', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.611Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f97b81d8d3a739649c

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.611Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f97b81d8d3a739649c'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.611Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.620Z] DELETE USER: Starting user deletion

      at log (src/controller/user.ts:168:13)

  console.log
    [2025-11-05T04:56:25.620Z] DELETE USER: Deleting user with ID: 690ad8f97b81d8d3a739649c

      at log (src/controller/user.ts:178:15)

  console.log
    [2025-11-05T04:56:25.620Z] DELETE USER: Removing user from group 690ad8f97b81d8d3a739649e

      at log (src/controller/user.ts:183:17)

  console.log
    [2025-11-05T04:56:25.622Z] AUTHENTICATE: Starting authentication for PUT /transfer-ownership/690ad8f92364a34addbbcc60

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.620Z] DELETE USER: Group 690ad8f97b81d8d3a739649e deleted as it has no members

      at log (src/controller/user.ts:207:21)

  console.log
    [2025-11-05T04:56:25.622Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.622Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.620Z] DELETE USER: User deleted successfully

      at log (src/controller/user.ts:225:15)

  console.log
    [2025-11-05T04:56:25.622Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.622Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcc60', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.622Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcc60

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.622Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcc60'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.622Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.629Z] ===== TRANSFER OWNERSHIP ROUTE HIT =====

      at log (src/routes/group.ts:326:11)

  console.log
    [2025-11-05T04:56:25.629Z] Method: PUT, Original URL: /api/group/transfer-ownership/690ad8f92364a34addbbcc60, Path: /transfer-ownership/690ad8f92364a34addbbcc60, Params: [Object: null prototype] { newOwnerId: '690ad8f92364a34addbbcc60' }

      at log (src/routes/group.ts:327:11)

  console.log
    [2025-11-05T04:56:25.629Z] GROUP TRANSFER OWNERSHIP: Transferring ownership to 690ad8f92364a34addbbcc60

      at log (src/routes/group.ts:329:11)

  console.log
    [2025-11-05T04:56:25.638Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.638Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.638Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.638Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.638Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f97b81d8d3a73964ab', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.642Z] AUTHENTICATE: Starting authentication for DELETE /member/690ad8f92364a34addbbcc6d

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.638Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f97b81d8d3a73964ab

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.642Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.642Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.642Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.638Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f97b81d8d3a73964ab'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.638Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.646Z] DELETE USER: Starting user deletion

      at log (src/controller/user.ts:168:13)

  console.log
    [2025-11-05T04:56:25.642Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcc6b', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.646Z] DELETE USER: Deleting user with ID: 690ad8f97b81d8d3a73964ab

      at log (src/controller/user.ts:178:15)

  console.log
    [2025-11-05T04:56:25.642Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcc6b

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.646Z] DELETE USER: Removing user from group 690ad8f97b81d8d3a73964af

      at log (src/controller/user.ts:183:17)

  console.log
    [2025-11-05T04:56:25.642Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcc6b'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.642Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.649Z] GROUP REMOVE MEMBER: Removing member 690ad8f92364a34addbbcc6d from group

      at log (src/routes/group.ts:394:11)

  console.log
    [2025-11-05T04:56:25.646Z] DELETE USER: User deleted successfully

      at log (src/controller/user.ts:225:15)

  console.log
    [2025-11-05T04:56:25.662Z] AUTHENTICATE: Starting authentication for DELETE /member/690ad8f92364a34addbbcc77

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.662Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.662Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.662Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.662Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcc73', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.666Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.662Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcc73

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.666Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.666Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.666Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.662Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcc73'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.662Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.671Z] GROUP REMOVE MEMBER: Removing member 690ad8f92364a34addbbcc77 from group

      at log (src/routes/group.ts:394:11)

  console.log
    [2025-11-05T04:56:25.666Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f97b81d8d3a73964bf', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.666Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f97b81d8d3a73964bf

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.666Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f97b81d8d3a73964bf'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.666Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.678Z] DELETE USER: Starting user deletion

      at log (src/controller/user.ts:168:13)

  console.log
    [2025-11-05T04:56:25.678Z] DELETE USER: Deleting user with ID: 690ad8f97b81d8d3a73964bf

      at log (src/controller/user.ts:178:15)

  console.log
    [2025-11-05T04:56:25.678Z] DELETE USER: Removing user from group 690ad8f97b81d8d3a73964c5

      at log (src/controller/user.ts:183:17)

  console.log
    [2025-11-05T04:56:25.678Z] DELETE USER: Transferred ownership to oldest member 690ad8f97b81d8d3a73964c1 (joined: Mon Jan 01 2024 16:00:00 GMT-0800 (Pacific Standard Time))

      at log (src/controller/user.ts:199:21)

  console.log
    [2025-11-05T04:56:25.678Z] DELETE USER: Updated new owner's groupName to Test Group

      at log (src/controller/user.ts:203:21)

  console.log
    [2025-11-05T04:56:25.678Z] DELETE USER: User deleted successfully

      at log (src/controller/user.ts:225:15)

  console.log
    [2025-11-05T04:56:25.685Z] AUTHENTICATE: Starting authentication for DELETE /member/690ad8f92364a34addbbcc88

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.685Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.685Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.685Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.685Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcc86', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.685Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcc86

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.685Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcc86'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.685Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.693Z] GROUP REMOVE MEMBER: Removing member 690ad8f92364a34addbbcc88 from group

      at log (src/routes/group.ts:394:11)

  console.log
    [2025-11-05T04:56:25.699Z] AUTHENTICATE: Starting authentication for PUT /users/report

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.699Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.699Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.699Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.699Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f97b81d8d3a73964da', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.699Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f97b81d8d3a73964da

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.702Z] AUTHENTICATE: Starting authentication for DELETE /leave

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.702Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.699Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f97b81d8d3a73964da'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.702Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.699Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.702Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.702Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcc93', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.702Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcc93

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.702Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcc93'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.702Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.723Z] AUTHENTICATE: Starting authentication for GET /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.723Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.723Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.723Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.723Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbcc99', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.723Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbcc99

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.723Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbcc99'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Test Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.723Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.731Z] GROUP GET: Getting group for user: 690ad8f92364a34addbbcc99

      at log (src/routes/group.ts:171:11)

  console.log
    [2025-11-05T04:56:25.731Z] GROUP GET: Group found: new ObjectId('690ad8f92364a34addbbcc9e')

      at log (src/routes/group.ts:186:13)

  console.log
    [2025-11-05T04:56:25.731Z] GROUP GET: Owner populated successfully

      at log (src/routes/group.ts:191:15)

  console.log
    [2025-11-05T04:56:25.731Z] GROUP GET: Owner data is invalid, attempting to fix ownership

      at log (src/routes/group.ts:195:17)

  console.log
    [2025-11-05T04:56:25.731Z] GROUP GET: No valid members found, creating placeholder owner

      at log (src/routes/group.ts:217:19)

  console.log
    [2025-11-05T04:56:25.731Z] GROUP GET: Members populated successfully

      at log (src/routes/group.ts:277:15)

  console.log
    [2025-11-05T04:56:25.731Z] GROUP GET: Member join durations:

      at log (src/routes/group.ts:292:13)

  console.log
    [2025-11-05T04:56:25.731Z]   - User Member User (690ad8f92364a34addbbcc9b): 674 days, 4 hours, 56 minutes (joined: 2024-01-01T00:00:00.000Z)

      at log (src/routes/group.ts:302:17)
          at Proxy.forEach (<anonymous>)

  console.log
    [2025-11-05T04:56:25.731Z]   - User Test User (690ad8f92364a34addbbcc99): 673 days, 4 hours, 56 minutes (joined: 2024-01-02T00:00:00.000Z)

      at log (src/routes/group.ts:302:17)
          at Proxy.forEach (<anonymous>)

  console.log
    [2025-11-05T04:56:25.757Z] AUTHENTICATE: Starting authentication for GET /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.757Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.757Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.757Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.757Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f92364a34addbbccac', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.757Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f92364a34addbbccac

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.757Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f92364a34addbbccac'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Test Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.757Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.765Z] GROUP GET: Getting group for user: 690ad8f92364a34addbbccac

      at log (src/routes/group.ts:171:11)

  console.log
    [2025-11-05T04:56:25.765Z] GROUP GET: Group found: new ObjectId('690ad8f92364a34addbbccae')

      at log (src/routes/group.ts:186:13)

  console.log
    [2025-11-05T04:56:25.765Z] GROUP GET: Owner populated successfully

      at log (src/routes/group.ts:191:15)

  console.log
    [2025-11-05T04:56:25.765Z] GROUP GET: Members populated successfully

      at log (src/routes/group.ts:277:15)

  console.log
    [2025-11-05T04:56:25.765Z] GROUP GET: Member join durations:

      at log (src/routes/group.ts:292:13)

  console.log
    [2025-11-05T04:56:25.765Z]   - User Test User (690ad8f92364a34addbbccac): 0 days, 0 hours, 0 minutes (joined: 2025-11-05T04:56:25.749Z)

      at log (src/routes/group.ts:302:17)
          at Proxy.forEach (<anonymous>)

  console.error
    Error processing report: CastError: Cast to ObjectId failed for value "invalid-id-format" (type string) at path "_id" for model "User"
        at SchemaObjectId.cast (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\schema\objectId.js:251:11)
        at SchemaObjectId.SchemaType.applySetters (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\schemaType.js:1259:12)
        at SchemaObjectId.SchemaType.castForQuery (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\schemaType.js:1695:17)
        at cast (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\cast.js:390:32)
        at model.Query.Query.cast (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:5060:12)
        at model.Query.Query._castConditions (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:2374:10)
        at model.Query._findOne (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:2697:8)
        at model.Query.exec (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:4627:80)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at report (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\report.ts:20:28) {
      stringValue: '"invalid-id-format"',
      messageFormat: undefined,
      kind: 'ObjectId',
      value: 'invalid-id-format',
      path: '_id',
      reason: BSONError: input must be a 24 character hex string, 12 byte Uint8Array, or an integer
          at new ObjectId (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\bson\src\objectid.ts:120:15)
          at castObjectId (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\cast\objectid.js:25:12)
          at SchemaObjectId.cast (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\schema\objectId.js:249:12)
          at SchemaObjectId.SchemaType.applySetters (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\schemaType.js:1259:12)
          at SchemaObjectId.SchemaType.castForQuery (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\schemaType.js:1695:17)
          at cast (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\cast.js:390:32)
          at model.Query.Query.cast (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:5060:12)
          at model.Query.Query._castConditions (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:2374:10)
          at model.Query._findOne (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:2697:8)
          at model.Query.exec (C:\Users\andy2\Desktop\Cpen321-group-project\backend\node_modules\mongoose\lib\query.js:4627:80)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at report (C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\controller\report.ts:20:28),
      valueType: 'string'
    }

      121 |
      122 |     } catch (error: any) {
    > 123 |       console.error('Error processing report:', error);
          |               ^
      124 |       return res.status(500).json({
      125 |         success: false,
      126 |         message: 'Failed to process report',

      at error (src/controller/report.ts:123:15)

  console.log
    [2025-11-05T04:56:25.814Z] AUTHENTICATE: Starting authentication for PUT /users/report

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.814Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.814Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.814Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.814Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f97b81d8d3a73964e0', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.814Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f97b81d8d3a73964e0

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.814Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f97b81d8d3a73964e0'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.814Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    Found 1 messages from user 690ad8f97b81d8d3a73964e2

      at log (src/controller/report.ts:40:15)

  console.log
    User 690ad8f97b81d8d3a73964e2 not marked as offensive - messages deemed acceptable

      at log (src/controller/report.ts:110:17)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: {
        schedule: 'Morning',
        drinking: 'Occasional',
        partying: 'Regular',
        noise: 'Quiet',
        profession: 'Student'
      }
    }

      at log (src/controller/user.ts:67:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { schedule: 'Morning', drinking: 'Occasional' }
    }

      at log (src/controller/user.ts:67:13)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: undefined,
      profilePicture: undefined,
      livingPreferences: { noise: 'Moderate', profession: 'Worker' }
    }

      at log (src/controller/user.ts:67:13)

FAIL src/__tests__/no-mocks/group.test.ts
  Group API - No Mocking
    ΓêÜ POST /api/group - should create a new group (213 ms)
    ΓêÜ POST /api/group - should reject empty group name (23 ms)
    ΓêÜ GET /api/group - should return user group (31 ms)
    ΓêÜ POST /api/group/join - should join existing group (41 ms)
    ΓêÜ DELETE /api/group/leave - should leave group (36 ms)
    ΓêÜ PUT /api/group/transfer-ownership/:newOwnerId - should transfer ownership (31 ms)
    ΓêÜ PUT /api/group/transfer-ownership/:newOwnerId - should reject non-owner (25 ms)
    ΓêÜ DELETE /api/group/member/:memberId - should remove member (39 ms)
    ΓêÜ POST /api/group/join - should reject joining full group (41 ms)
    ΓêÜ POST /api/group/join - should reject invalid group code (23 ms)
    ΓêÜ GET /api/group - should return 404 when user not in group (20 ms)
    ΓêÜ PUT /api/group/transfer-ownership/:newOwnerId - should reject non-member transfer (23 ms)
    ΓêÜ DELETE /api/group/member/:memberId - should reject removing owner (18 ms)
    ΓêÜ DELETE /api/group/leave - should transfer ownership when owner leaves (26 ms)
    ΓêÜ POST /api/group - should reject when user already in group (21 ms)
    ΓêÜ POST /api/group/join - should reject empty group code (17 ms)
    ΓêÜ POST /api/group/join - should reject when user already in group (24 ms)
    ├ù POST /api/group/join - should reject when already member of this group (26 ms)
    ΓêÜ PUT /api/group/transfer-ownership/:newOwnerId - should reject when user not in group (18 ms)
    ΓêÜ PUT /api/group/transfer-ownership/:newOwnerId - should reject transferring to self (20 ms)
    ΓêÜ DELETE /api/group/member/:memberId - should reject when user not in group (18 ms)
    ΓêÜ DELETE /api/group/member/:memberId - should reject non-owner removing member (23 ms)
    ΓêÜ DELETE /api/group/member/:memberId - should reject when member not found (22 ms)
    ΓêÜ DELETE /api/group/leave - should reject when user not in group (15 ms)
    ΓêÜ GET /api/group - should handle invalid owner and transfer ownership (33 ms)
    ΓêÜ GET /api/group - should handle errors gracefully (29 ms)

  ΓùÅ Group API - No Mocking ΓÇ║ POST /api/group/join - should reject when already member of this group

    expect(received).toContain(expected) // indexOf

    Expected substring: "already a member of this group"
    Received string:    "User is already a member of a group"

      537 |     expect(response.status).toBe(400);
      538 |     expect(response.body.success).toBe(false);
    > 539 |     expect(response.body.message).toContain('already a member of this group');
          |                                   ^
      540 |   });
      541 |
      542 |   /**

      at Object.<anonymous> (src/__tests__/no-mocks/group.test.ts:539:35)

  console.log
    calling updateOptionalProfile

      at log (src/controller/user.ts:66:13)

  console.log
    Received data: {
      email: 'testuser@example.com',
      bio: 'Test bio',
      profilePicture: undefined,
      livingPreferences: undefined
    }

      at log (src/controller/user.ts:67:13)

  console.log
    [2025-11-05T04:56:25.945Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.945Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.945Z] AUTHENTICATE: Token extracted: invalid-to...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.945Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.945Z] AUTHENTICATE: Token verification failed: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

      at log (src/middleware/auth.ts:96:13)

  console.log
    [2025-11-05T04:56:25.962Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.962Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.962Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.962Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.962Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f97b81d8d3a7396527', email: 'deletetest@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.962Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f97b81d8d3a7396527

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.962Z] AUTHENTICATE: User not found in database for ID: 690ad8f97b81d8d3a7396527

      at log (src/middleware/auth.ts:75:15)

  console.log
    [2025-11-05T04:56:25.977Z] AUTHENTICATE: Starting authentication for DELETE /users/me

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:25.977Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:25.977Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:25.977Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:25.977Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8f97b81d8d3a739652e', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:25.977Z] AUTHENTICATE: Fetching user from database with ID: 690ad8f97b81d8d3a739652e

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:25.977Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8f97b81d8d3a739652e'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:25.977Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:25.985Z] DELETE USER: Starting user deletion

      at log (src/controller/user.ts:168:13)

  console.log
    [2025-11-05T04:56:25.985Z] DELETE USER: Deleting user with ID: 690ad8f97b81d8d3a739652e

      at log (src/controller/user.ts:178:15)

  console.log
    [2025-11-05T04:56:25.985Z] DELETE USER: User deleted successfully

      at log (src/controller/user.ts:225:15)

FAIL src/__tests__/no-mocks/user.test.ts (5.136 s)
  User API - No Mocking
    ΓêÜ GET /api/user/ - should return success message when authenticated (235 ms)
    ΓêÜ PUT /api/user/users/profile - should set user profile successfully (38 ms)
    ΓêÜ PUT /api/user/users/profile - should return 400 for missing fields (11 ms)
    ΓêÜ PUT /api/user/users/profile - should reject invalid gender (10 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should update optional profile (35 ms)
    ΓêÜ DELETE /api/user/users/me - should delete user account (34 ms)
    ΓêÜ PUT /api/user/users/report - should report user (39 ms)
    ΓêÜ PUT /api/user/users/report - should return 400 for missing fields (22 ms)
    ΓêÜ PUT /api/user/users/report - should return 404 when user not found (30 ms)
    ΓêÜ PUT /api/user/users/report - should return 400 when no messages found (30 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should reject invalid living preferences (18 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should require basic profile first (14 ms)
    ΓêÜ PUT /api/user/users/profile - should return 404 when user not found (9 ms)
    ΓêÜ PUT /api/user/users/profile - should reject invalid DOB format (10 ms)
    ΓêÜ PUT /api/user/users/profile - should reject changing immutable fields (14 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should return 400 for missing email (12 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should reject bio too long (16 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should reject invalid drinking value (15 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should reject invalid partying value (14 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should reject invalid noise value (17 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should reject invalid profession value (13 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should return 404 when user not found (11 ms)
    ΓêÜ DELETE /api/user/users/me - should transfer ownership when owner deletes account (35 ms)
    ΓêÜ DELETE /api/user/users/me - should delete group when owner is last member (24 ms)
    ΓêÜ DELETE /api/user/users/me - should remove member from group (28 ms)
    ΓêÜ DELETE /api/user/users/me - should transfer ownership to oldest member by join date (36 ms)
    ΓêÜ PUT /api/user/users/report - should handle errors gracefully (107 ms)
    ΓêÜ PUT /api/user/users/report - should mark user as offensive when content is offensive (31 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should update all livingPreferences fields (17 ms)
    ├ù PUT /api/user/users/optionalProfile - should initialize livingPreferences when none exists (15 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should update partial livingPreferences (30 ms)
    ΓêÜ PUT /api/user/users/profile - should handle database errors (11 ms)
    ΓêÜ PUT /api/user/users/optionalProfile - should handle database errors (19 ms)
    ΓêÜ DELETE /api/user/users/me - should return 401 when user not authenticated (13 ms)
    ΓêÜ DELETE /api/user/users/me - should handle user not found after deletion (18 ms)
    ΓêÜ DELETE /api/user/users/me - should handle errors during deletion (19 ms)

  ΓùÅ User API - No Mocking ΓÇ║ PUT /api/user/users/optionalProfile - should initialize livingPreferences when none 
exists

    expect(received).toBeUndefined()

    Received: {}

      883 |     // Ensure user has no livingPreferences
      884 |     const user = await UserModel.findOne({ email: 'testuser@example.com' });
    > 885 |     expect(user?.livingPreferences).toBeUndefined();
          |                                     ^
      886 |
      887 |     // Update with livingPreferences
      888 |     const response = await request(app)

      at Object.<anonymous> (src/__tests__/no-mocks/user.test.ts:885:37)

ts-jest[ts-compiler] (WARN) [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only 
supported in "isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this 
message, you can set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
ts-jest[ts-compiler] (WARN) [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only 
supported in "isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this 
message, you can set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
FAIL src/__tests__/no-mocks/rating.test.ts
  ΓùÅ Test suite failed to run

    [96msrc/__tests__/no-mocks/rating.test.ts[0m:[93m345[0m:[93m22[0m - [91merror[0m[90m TS18046: 
[0m'newUser._id' is of type 'unknown'.

    [7m345[0m         ratedUserId: newUser._id.toString(),
    [7m   [0m [91m                     ~~~~~~~~~~~[0m
    [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics

  console.log
    Final configuration: { PORT: 4000, GOOGLE_CLIENT_ID: '[SET]', JWT_SECRET: '[SET]' }

      at Object.<anonymous> (src/config.ts:41:9)

  console.log
    Final configuration: { PORT: 4000, GOOGLE_CLIENT_ID: '[SET]', JWT_SECRET: '[SET]' }

      at Object.<anonymous> (src/config.ts:41:9)

  console.log
    [2025-11-05T04:56:27.108Z] AUTHENTICATE: Starting authentication for GET /690ad8fb80e5bcbbca0bc2bb/messages

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.108Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.108Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.108Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.108Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fa80e5bcbbca0bc2b2', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.108Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fa80e5bcbbca0bc2b2

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.108Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fa80e5bcbbca0bc2b2'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.108Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.133Z] CHAT GET MESSAGES: Starting get messages for group

      at log (src/routes/chat.ts:20:11)

  console.log
    [2025-11-05T04:56:27.133Z] CHAT GET MESSAGES: User: {
      _id: '690ad8fa80e5bcbbca0bc2b2',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/chat.ts:21:11)

  console.log
    [2025-11-05T04:56:27.133Z] CHAT GET MESSAGES: Group ID: 690ad8fb80e5bcbbca0bc2bb

      at log (src/routes/chat.ts:22:11)

  console.log
    [2025-11-05T04:56:27.133Z] CHAT GET MESSAGES: Query params: [Object: null prototype] {}

      at log (src/routes/chat.ts:23:11)

  console.log
    [2025-11-05T04:56:27.133Z] CHAT GET MESSAGES: Looking for group with ID: 690ad8fb80e5bcbbca0bc2bb

      at log (src/routes/chat.ts:28:11)

  console.log
    [2025-11-05T04:56:27.133Z] CHAT GET MESSAGES: Group found, checking membership

      at log (src/routes/chat.ts:49:11)

  console.log
    [2025-11-05T04:56:27.133Z] CHAT GET MESSAGES: User is member, fetching messages

      at log (src/routes/chat.ts:62:11)

  console.log
    [2025-11-05T04:56:27.133Z] CHAT GET MESSAGES: Found 1 messages

      at log (src/routes/chat.ts:70:11)

  console.log
    [2025-11-05T04:56:27.201Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc2cc/message

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.201Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.201Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.201Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.201Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc2ca', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.201Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc2ca

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.201Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc2ca'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.201Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.209Z] CHAT SEND MESSAGE: Starting send message

      at log (src/routes/chat.ts:89:11)

  console.log
    [2025-11-05T04:56:27.209Z] CHAT SEND MESSAGE: User: {
      _id: '690ad8fb80e5bcbbca0bc2ca',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/chat.ts:90:11)

  console.log
    [2025-11-05T04:56:27.209Z] CHAT SEND MESSAGE: Group ID: 690ad8fb80e5bcbbca0bc2cc

      at log (src/routes/chat.ts:91:11)

  console.log
    [2025-11-05T04:56:27.209Z] CHAT SEND MESSAGE: Request body: { content: 'Test message' }

      at log (src/routes/chat.ts:92:11)

  console.log
    [2025-11-05T04:56:27.209Z] CHAT SEND MESSAGE: Looking for group with ID: 690ad8fb80e5bcbbca0bc2cc

      at log (src/routes/chat.ts:122:11)

  console.log
    [2025-11-05T04:56:27.210Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.210Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.209Z] CHAT SEND MESSAGE: Broadcasting to group 690ad8fb80e5bcbbca0bc2cc with data: {
      id: '690ad8fb80e5bcbbca0bc2d3',
      content: 'Test message',
      senderId: '690ad8fb80e5bcbbca0bc2ca',
      senderName: 'Test User',
      groupId: '690ad8fb80e5bcbbca0bc2cc',
      timestamp: 1762318587214,
      type: 'text'
    }

      at log (src/routes/chat.ts:166:13)

  console.log
    [2025-11-05T04:56:27.210Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.209Z] CHAT SEND MESSAGE: Sockets in room 690ad8fb80e5bcbbca0bc2cc: 0

      at log (src/routes/chat.ts:170:13)

  console.log
    [2025-11-05T04:56:27.209Z] CHAT SEND MESSAGE: Broadcasted message to group 690ad8fb80e5bcbbca0bc2cc

      at log (src/routes/chat.ts:173:13)

  console.log
    [2025-11-05T04:56:27.210Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.210Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fb41', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.210Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fb41

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.210Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fb41'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.210Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.229Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc2db/message

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.229Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.229Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.229Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.229Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc2d9', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.229Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc2d9

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.229Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc2d9'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.229Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.236Z] CHAT SEND MESSAGE: Starting send message

      at log (src/routes/chat.ts:89:11)

  console.log
    [2025-11-05T04:56:27.236Z] CHAT SEND MESSAGE: User: {
      _id: '690ad8fb80e5bcbbca0bc2d9',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/chat.ts:90:11)

  console.log
    [2025-11-05T04:56:27.236Z] CHAT SEND MESSAGE: Group ID: 690ad8fb80e5bcbbca0bc2db

      at log (src/routes/chat.ts:91:11)

  console.log
    [2025-11-05T04:56:27.236Z] CHAT SEND MESSAGE: Request body: { content: '' }

      at log (src/routes/chat.ts:92:11)

  console.log
    [2025-11-05T04:56:27.236Z] CHAT SEND MESSAGE: Message content is required

      at log (src/routes/chat.ts:98:13)

  console.log
    [2025-11-05T04:56:27.249Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc2e5/poll

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.249Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.249Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.249Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.249Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc2e3', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.249Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc2e3

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.249Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc2e3'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.249Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.270Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc2f4/poll

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.270Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.270Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.270Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.270Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc2f2', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.270Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc2f2

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.270Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc2f2'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.270Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.273Z] AUTHENTICATE: Starting authentication for GET /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.273Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.273Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.273Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.273Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fb58', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.273Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fb58

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.273Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fb58'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.273Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.281Z] GET /api/task - User: 690ad8fba8a939773344fb58

      at log (src/routes/task.ts:119:11)

  console.log
    [2025-11-05T04:56:27.283Z] GET /api/task - Group found: new ObjectId('690ad8fba8a939773344fb5a')

      at log (src/routes/task.ts:126:11)

  console.log
    [2025-11-05T04:56:27.284Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc2fe/poll/690ad8fb80e5bcbbca0bc302/vote

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.284Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.284Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.284Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.284Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc2fc', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.284Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc2fc

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.284Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc2fc'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.284Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.290Z] GET /api/task - Found 1 tasks

      at log (src/routes/task.ts:142:11)

  console.log
    [2025-11-05T04:56:27.301Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.301Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.301Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.301Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.301Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fb68', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.301Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fb68

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.301Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fb68'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.301Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.309Z] AUTHENTICATE: Starting authentication for DELETE /690ad8fb80e5bcbbca0bc310/message/690ad8fb80e5bcbbca0bc314

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.309Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.309Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.309Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.309Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc30e', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.309Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc30e

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.309Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc30e'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.309Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.324Z] AUTHENTICATE: Starting authentication for GET /my-tasks

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.324Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.324Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.324Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.324Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fb72', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.324Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fb72

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.324Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fb72'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.329Z] AUTHENTICATE: Starting authentication for GET /invalid-id/messages

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.324Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.329Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.329Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.329Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.329Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc31d', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.329Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc31d

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.329Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc31d'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.329Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.334Z] CHAT GET MESSAGES: Starting get messages for group

      at log (src/routes/chat.ts:20:11)

  console.log
    [2025-11-05T04:56:27.334Z] CHAT GET MESSAGES: User: {
      _id: '690ad8fb80e5bcbbca0bc31d',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/chat.ts:21:11)

  console.log
    [2025-11-05T04:56:27.334Z] CHAT GET MESSAGES: Group ID: invalid-id

      at log (src/routes/chat.ts:22:11)

  console.log
    [2025-11-05T04:56:27.334Z] CHAT GET MESSAGES: Query params: [Object: null prototype] {}

      at log (src/routes/chat.ts:23:11)

  console.log
    [2025-11-05T04:56:27.334Z] CHAT GET MESSAGES: Looking for group with ID: invalid-id

      at log (src/routes/chat.ts:28:11)

  console.log
    [2025-11-05T04:56:27.334Z] CHAT GET MESSAGES: Invalid ObjectId format: invalid-id

      at log (src/routes/chat.ts:32:13)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc329/message

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Starting authentication for PUT /690ad8fba8a939773344fb8c/status

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fb86', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc327', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fb86

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc327

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc327'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fb86'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.348Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.354Z] CHAT SEND MESSAGE: Starting send message

      at log (src/routes/chat.ts:89:11)

  console.log
    [2025-11-05T04:56:27.354Z] CHAT SEND MESSAGE: User: {
      _id: '690ad8fb80e5bcbbca0bc327',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/chat.ts:90:11)

  console.log
    [2025-11-05T04:56:27.354Z] CHAT SEND MESSAGE: Group ID: 690ad8fb80e5bcbbca0bc329

      at log (src/routes/chat.ts:91:11)

  console.log
    [2025-11-05T04:56:27.354Z] CHAT SEND MESSAGE: Request body: {
      content: 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'
    }

      at log (src/routes/chat.ts:92:11)

  console.log
    [2025-11-05T04:56:27.354Z] CHAT SEND MESSAGE: Message content too long: 1001

      at log (src/routes/chat.ts:106:13)

  console.log
    [2025-11-05T04:56:27.365Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc333/poll

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.365Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.365Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.365Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.365Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc331', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.365Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc331

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.365Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc331'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.365Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.373Z] AUTHENTICATE: Starting authentication for POST /690ad8fba8a939773344fb9f/assign

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.373Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.373Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.373Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.373Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fb99', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.373Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fb99

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.373Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fb99'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.373Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.384Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc33d/poll/690ad8fb80e5bcbbca0bc341/vote

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.384Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.384Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.384Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.384Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc33b', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.384Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc33b

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.384Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc33b'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.384Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.396Z] AUTHENTICATE: Starting authentication for POST /assign-weekly

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.396Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.396Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.396Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.396Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fbac', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.396Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fbac

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.396Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fbac'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.396Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.400Z] AUTHENTICATE: Starting authentication for DELETE /690ad8fb80e5bcbbca0bc34c/message/690ad8fb80e5bcbbca0bc352

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.400Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.400Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.400Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.400Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc34a', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.400Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc34a

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.400Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc34a'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.400Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.406Z] Auto-assigning task "Weekly Task" (required: 1) to 1 members

      at log (src/routes/task.ts:401:13)

  console.log
    [2025-11-05T04:56:27.419Z] AUTHENTICATE: Starting authentication for GET /690ad8fb80e5bcbbca0bc35f/messages

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.419Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.419Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.419Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.419Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc363', email: 'other@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.419Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc363

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.419Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc363'),
      email: 'other@example.com',
      name: 'Other User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.419Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.425Z] AUTHENTICATE: Starting authentication for GET /week/2025-11-02T07:00:00.000Z

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.425Z] CHAT GET MESSAGES: Starting get messages for group

      at log (src/routes/chat.ts:20:11)

  console.log
    [2025-11-05T04:56:27.425Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.425Z] CHAT GET MESSAGES: User: {
      _id: '690ad8fb80e5bcbbca0bc363',
      email: 'other@example.com',
      name: 'Other User',
      groupName: undefined
    }

      at log (src/routes/chat.ts:21:11)

  console.log
    [2025-11-05T04:56:27.425Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.425Z] CHAT GET MESSAGES: Group ID: 690ad8fb80e5bcbbca0bc35f

      at log (src/routes/chat.ts:22:11)

  console.log
    [2025-11-05T04:56:27.425Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.425Z] CHAT GET MESSAGES: Query params: [Object: null prototype] {}

      at log (src/routes/chat.ts:23:11)

  console.log
    [2025-11-05T04:56:27.425Z] CHAT GET MESSAGES: Looking for group with ID: 690ad8fb80e5bcbbca0bc35f

      at log (src/routes/chat.ts:28:11)

  console.log
    [2025-11-05T04:56:27.425Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fbc2', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.425Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fbc2

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.425Z] CHAT GET MESSAGES: Group found, checking membership

      at log (src/routes/chat.ts:49:11)

  console.log
    [2025-11-05T04:56:27.425Z] CHAT GET MESSAGES: User is not a member of group: 690ad8fb80e5bcbbca0bc35f

      at log (src/routes/chat.ts:55:13)

  console.log
    [2025-11-05T04:56:27.425Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fbc2'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.425Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.434Z] AUTHENTICATE: Starting authentication for GET /690ad8fb80e5bcbbca0bc368/messages

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.434Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.434Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.434Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.434Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc359', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.434Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc359

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.434Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc359'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.434Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.443Z] CHAT GET MESSAGES: Starting get messages for group

      at log (src/routes/chat.ts:20:11)

  console.log
    [2025-11-05T04:56:27.443Z] CHAT GET MESSAGES: User: {
      _id: '690ad8fb80e5bcbbca0bc359',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/chat.ts:21:11)

  console.log
    [2025-11-05T04:56:27.443Z] CHAT GET MESSAGES: Group ID: 690ad8fb80e5bcbbca0bc368

      at log (src/routes/chat.ts:22:11)

  console.log
    [2025-11-05T04:56:27.443Z] CHAT GET MESSAGES: Query params: [Object: null prototype] {}

      at log (src/routes/chat.ts:23:11)

  console.log
    [2025-11-05T04:56:27.443Z] CHAT GET MESSAGES: Looking for group with ID: 690ad8fb80e5bcbbca0bc368

      at log (src/routes/chat.ts:28:11)

  console.log
    [2025-11-05T04:56:27.443Z] CHAT GET MESSAGES: Group found, checking membership

      at log (src/routes/chat.ts:49:11)

  console.log
    [2025-11-05T04:56:27.443Z] CHAT GET MESSAGES: User is not a member of group: 690ad8fb80e5bcbbca0bc368

      at log (src/routes/chat.ts:55:13)

  console.log
    [2025-11-05T04:56:27.451Z] AUTHENTICATE: Starting authentication for GET /date/2025-11-05T04:56:27.449Z

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.451Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.451Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.451Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.451Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fbd6', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.451Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fbd6

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.451Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fbd6'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.451Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.468Z] AUTHENTICATE: Starting authentication for DELETE /690ad8fba8a939773344fbeb

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.468Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.468Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.468Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.468Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fbe5', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.468Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fbe5

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.468Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fbe5'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.468Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.485Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.485Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.485Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.485Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.485Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fbf6', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.485Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fbf6

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.485Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fbf6'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.485Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.498Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.498Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.498Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.498Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.498Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fc00', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.498Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fc00

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.498Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fc00'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.498Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.516Z] AUTHENTICATE: Starting authentication for PUT /690ad8fba8a939773344fc10/status

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.516Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.516Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.516Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.516Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fc0a', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.516Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fc0a

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.516Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fc0a'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.516Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.526Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc3ce/poll/690ad8fb80e5bcbbca0bc3d2/vote

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.526Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.526Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.526Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.526Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc3cc', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.526Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc3cc

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.530Z] AUTHENTICATE: Starting authentication for POST /690ad8fba8a939773344fc1e/assign

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.530Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.530Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.530Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.526Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc3cc'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.526Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.530Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fc18', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.530Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fc18

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.530Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fc18'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.530Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.543Z] AUTHENTICATE: Starting authentication for GET /690ad8fb80e5bcbbca0bc3e1/messages

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.543Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.543Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.543Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.543Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc3db', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.543Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc3db

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.543Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc3db'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.543Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.549Z] CHAT GET MESSAGES: Starting get messages for group

      at log (src/routes/chat.ts:20:11)

  console.log
    [2025-11-05T04:56:27.549Z] CHAT GET MESSAGES: User: {
      _id: '690ad8fb80e5bcbbca0bc3db',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/chat.ts:21:11)

  console.log
    [2025-11-05T04:56:27.549Z] CHAT GET MESSAGES: Group ID: 690ad8fb80e5bcbbca0bc3e1

      at log (src/routes/chat.ts:22:11)

  console.log
    [2025-11-05T04:56:27.549Z] CHAT GET MESSAGES: Query params: [Object: null prototype] {}

      at log (src/routes/chat.ts:23:11)

  console.log
    [2025-11-05T04:56:27.549Z] CHAT GET MESSAGES: Looking for group with ID: 690ad8fb80e5bcbbca0bc3e1

      at log (src/routes/chat.ts:28:11)

  console.log
    [2025-11-05T04:56:27.549Z] CHAT GET MESSAGES: Group not found: 690ad8fb80e5bcbbca0bc3e1

      at log (src/routes/chat.ts:42:13)

  console.log
    [2025-11-05T04:56:27.553Z] AUTHENTICATE: Starting authentication for POST /690ad8fba8a939773344fc34/assign

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.553Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.553Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.553Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.553Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fc24', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.553Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fc24

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.553Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fc24'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Other Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.553Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.560Z] AUTHENTICATE: Starting authentication for POST /invalid-id/message

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.560Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.560Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.560Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.560Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc3e7', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.560Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc3e7

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.560Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc3e7'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.560Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.566Z] CHAT SEND MESSAGE: Starting send message

      at log (src/routes/chat.ts:89:11)

  console.log
    [2025-11-05T04:56:27.566Z] CHAT SEND MESSAGE: User: {
      _id: '690ad8fb80e5bcbbca0bc3e7',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/chat.ts:90:11)

  console.log
    [2025-11-05T04:56:27.566Z] CHAT SEND MESSAGE: Group ID: invalid-id

      at log (src/routes/chat.ts:91:11)

  console.log
    [2025-11-05T04:56:27.566Z] CHAT SEND MESSAGE: Request body: { content: 'Test message' }

      at log (src/routes/chat.ts:92:11)

  console.log
    [2025-11-05T04:56:27.566Z] CHAT SEND MESSAGE: Invalid ObjectId format: invalid-id

      at log (src/routes/chat.ts:115:13)

  console.log
    [2025-11-05T04:56:27.574Z] AUTHENTICATE: Starting authentication for DELETE /690ad8fba8a939773344fc4e

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.574Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.575Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc3f7/message

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.574Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.575Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.574Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.575Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.574Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fc3e', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.575Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.574Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fc3e

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.575Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc3f1', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.575Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc3f1

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.575Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc3f1'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.575Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.574Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fc3e'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: 'Other Group'
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.581Z] CHAT SEND MESSAGE: Starting send message

      at log (src/routes/chat.ts:89:11)

  console.log
    [2025-11-05T04:56:27.574Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.581Z] CHAT SEND MESSAGE: User: {
      _id: '690ad8fb80e5bcbbca0bc3f1',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/chat.ts:90:11)

  console.log
    [2025-11-05T04:56:27.581Z] CHAT SEND MESSAGE: Group ID: 690ad8fb80e5bcbbca0bc3f7

      at log (src/routes/chat.ts:91:11)

  console.log
    [2025-11-05T04:56:27.581Z] CHAT SEND MESSAGE: Request body: { content: 'Test message' }

      at log (src/routes/chat.ts:92:11)

  console.log
    [2025-11-05T04:56:27.581Z] CHAT SEND MESSAGE: Looking for group with ID: 690ad8fb80e5bcbbca0bc3f7

      at log (src/routes/chat.ts:122:11)

  console.log
    [2025-11-05T04:56:27.592Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.592Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.592Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.592Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.592Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fc58', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.592Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fc58

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.592Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fc58'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.592Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.596Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc405/message

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.596Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.596Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.596Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.596Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc3fd', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.596Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc3fd

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.596Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc3fd'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.596Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.602Z] CHAT SEND MESSAGE: Starting send message

      at log (src/routes/chat.ts:89:11)

  console.log
    [2025-11-05T04:56:27.602Z] CHAT SEND MESSAGE: User: {
      _id: '690ad8fb80e5bcbbca0bc3fd',
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/routes/chat.ts:90:11)

  console.log
    [2025-11-05T04:56:27.602Z] CHAT SEND MESSAGE: Group ID: 690ad8fb80e5bcbbca0bc405

      at log (src/routes/chat.ts:91:11)

  console.log
    [2025-11-05T04:56:27.602Z] CHAT SEND MESSAGE: Request body: { content: 'Test message' }

      at log (src/routes/chat.ts:92:11)

  console.log
    [2025-11-05T04:56:27.602Z] CHAT SEND MESSAGE: Looking for group with ID: 690ad8fb80e5bcbbca0bc405

      at log (src/routes/chat.ts:122:11)

  console.log
    [2025-11-05T04:56:27.606Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.606Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.606Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.606Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.606Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fc62', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.606Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fc62

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.606Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fc62'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.606Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.615Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc415/poll

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.615Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.615Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.615Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.615Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc40f', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.615Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc40f

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.619Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.615Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc40f'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.619Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.615Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.619Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.619Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.619Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fc72', email: 'nogroup@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.619Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fc72

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.619Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fc72'),
      email: 'nogroup@example.com',
      name: 'No Group User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.619Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.632Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc423/poll

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.632Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.632Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.632Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.632Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc41b', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.632Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc41b

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.636Z] AUTHENTICATE: Starting authentication for POST /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.632Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc41b'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.636Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.632Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.636Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.636Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.636Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fc79', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.636Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fc79

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.636Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fc79'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.636Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.644Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc42f/poll/690ad8fb80e5bcbbca0bc433/vote

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.644Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.644Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.644Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.644Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc42d', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.644Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc42d

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.644Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc42d'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.644Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.660Z] AUTHENTICATE: Starting authentication for GET /my-tasks

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.660Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.660Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.661Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc43b/poll/690ad8fb80e5bcbbca0bc443/vote

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.660Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.661Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.661Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.660Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fc96', email: 'nogroup2@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.661Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.660Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fc96

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.661Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc439', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.660Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fc96'),
      email: 'nogroup2@example.com',
      name: 'No Group User 2',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.661Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc439

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.660Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.661Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc439'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.661Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.672Z] AUTHENTICATE: Starting authentication for PUT /690ad8fba8a939773344fca3/status

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.672Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.672Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.672Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.672Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fc9d', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.672Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fc9d

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.672Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fc9d'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.672Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.677Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc452/poll/690ad8fb80e5bcbbca0bc450/vote

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.677Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.677Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.677Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.677Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc44a', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.677Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc44a

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.677Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc44a'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.677Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.688Z] AUTHENTICATE: Starting authentication for PUT /690ad8fba8a939773344fcaf/status

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.688Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.688Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.688Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.688Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fca9', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.688Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fca9

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.688Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fca9'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.688Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.697Z] AUTHENTICATE: Starting authentication for POST /690ad8fb80e5bcbbca0bc460/poll/690ad8fb80e5bcbbca0bc464/vote

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.697Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.697Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.697Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.697Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc458', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.697Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc458

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.697Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc458'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.697Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.713Z] AUTHENTICATE: Starting authentication for DELETE /690ad8fb80e5bcbbca0bc46f/message/690ad8fb80e5bcbbca0bc473

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.713Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.713Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.713Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.713Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc46d', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.713Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc46d

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.713Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc46d'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.713Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.723Z] AUTHENTICATE: Starting authentication for PUT /690ad8fba8a939773344fcbc/status

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.723Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.723Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.723Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.723Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fcb6', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.723Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fcb6

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.723Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fcb6'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.723Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.730Z] AUTHENTICATE: Starting authentication for DELETE /690ad8fb80e5bcbbca0bc47b/message/690ad8fb80e5bcbbca0bc483

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.730Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.730Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.730Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.730Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fb80e5bcbbca0bc479', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.730Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fb80e5bcbbca0bc479

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.730Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fb80e5bcbbca0bc479'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.730Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.743Z] AUTHENTICATE: Starting authentication for POST /690ad8fba8a939773344fcd0/assign

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.743Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.743Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.743Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.743Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fcca', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.743Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fcca

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.743Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fcca'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.743Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.760Z] AUTHENTICATE: Starting authentication for POST /690ad8fba8a939773344fcdc/assign

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.760Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.760Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.760Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.760Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fcde', email: 'nogroup3@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.760Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fcde

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.760Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fcde'),
      email: 'nogroup3@example.com',
      name: 'No Group User 3',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.760Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.778Z] AUTHENTICATE: Starting authentication for POST /690ad8fba8a939773344fcf0/assign

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.778Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.778Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.778Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.778Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fcec', email: 'member2@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.778Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fcec

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.778Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fcec'),
      email: 'member2@example.com',
      name: 'Member User 2',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.778Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.796Z] AUTHENTICATE: Starting authentication for POST /assign-weekly

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.796Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.796Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.796Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.796Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fd00', email: 'nogroup4@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.796Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fd00

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.796Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fd00'),
      email: 'nogroup4@example.com',
      name: 'No Group User 4',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.796Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.812Z] AUTHENTICATE: Starting authentication for POST /assign-weekly

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.812Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.812Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.812Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.812Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fd07', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.812Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fd07

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.812Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fd07'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.812Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.828Z] AUTHENTICATE: Starting authentication for POST /assign-weekly

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.828Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.828Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.828Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.828Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fd15', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.828Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fd15

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.828Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fd15'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.828Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.849Z] AUTHENTICATE: Starting authentication for POST /assign-weekly

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.849Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.849Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.849Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.849Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fd2b', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.849Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fd2b

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.849Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fd2b'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.849Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.856Z] Skipping task "Weekly Task" - already assigned for this week

      at log (src/routes/task.ts:388:15)

  console.log
    [2025-11-05T04:56:27.869Z] AUTHENTICATE: Starting authentication for POST /assign-weekly

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.869Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.869Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.869Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.869Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fd41', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.869Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fd41

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.869Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fd41'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.869Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.879Z] Auto-assigning task "Old Task" (required: 1) to 1 members

      at log (src/routes/task.ts:401:13)

FAIL src/__tests__/no-mocks/chat.test.ts (6.892 s)
  Chat API - No Mocking
    ΓêÜ GET /api/chat/:groupId/messages - should return group messages (215 ms)
    ΓêÜ POST /api/chat/:groupId/message - should send a message (37 ms)
    ΓêÜ POST /api/chat/:groupId/message - should reject empty message (19 ms)
    ΓêÜ POST /api/chat/:groupId/poll - should create a poll (22 ms)
    ΓêÜ POST /api/chat/:groupId/poll - should reject poll with insufficient options (13 ms)
    ΓêÜ POST /api/chat/:groupId/poll/:messageId/vote - should vote on poll (24 ms)
    ΓêÜ DELETE /api/chat/:groupId/message/:messageId - should delete message (23 ms)
    ΓêÜ GET /api/chat/:groupId/messages - should reject invalid ObjectId (17 ms)
    ΓêÜ POST /api/chat/:groupId/message - should reject message too long (18 ms)
    ΓêÜ POST /api/chat/:groupId/poll - should reject poll with too many options (17 ms)
    ΓêÜ POST /api/chat/:groupId/poll/:messageId/vote - should reject invalid option (16 ms)
    ΓêÜ DELETE /api/chat/:groupId/message/:messageId - should reject non-sender deletion (16 ms)
    ΓêÜ GET /api/chat/:groupId/messages - should reject non-member access (40 ms)
    ΓêÜ Message.addVote - should add vote to poll (10 ms)
    ΓêÜ Message.addVote - should replace existing vote (11 ms)
    ΓêÜ Message.addVote - should throw error for non-poll message (21 ms)
    ΓêÜ Message.addVote - should throw error for expired poll (8 ms)
    ΓêÜ Message.hasUserVoted - should return true when user has voted (7 ms)
    ΓêÜ Message.hasUserVoted - should return false when user has not voted (8 ms)
    ΓêÜ Message.hasUserVoted - should return false for non-poll message (6 ms)
    ΓêÜ POST /api/chat/:groupId/poll/:messageId/vote - should reject vote on expired poll (18 ms)
    ΓêÜ GET /api/chat/:groupId/messages - should return 404 when group not found (17 ms)
    ΓêÜ POST /api/chat/:groupId/message - should reject invalid ObjectId format (16 ms)
    ΓêÜ POST /api/chat/:groupId/message - should return 404 when group not found (16 ms)
    ΓêÜ POST /api/chat/:groupId/message - should reject non-member access (22 ms)
    ΓêÜ POST /api/chat/:groupId/poll - should return 404 when group not found (15 ms)
    ΓêÜ POST /api/chat/:groupId/poll - should reject non-member access (16 ms)
    ΓêÜ POST /api/chat/:groupId/poll/:messageId/vote - should return 404 when poll not found (12 ms)
    ΓêÜ POST /api/chat/:groupId/poll/:messageId/vote - should reject poll from different group (18 ms)
    ├ù POST /api/chat/:groupId/poll/:messageId/vote - should return 404 when group not found (16 ms)
    ΓêÜ POST /api/chat/:groupId/poll/:messageId/vote - should reject non-member access (20 ms)
    ΓêÜ DELETE /api/chat/:groupId/message/:messageId - should return 404 when message not found (14 ms)
    ΓêÜ DELETE /api/chat/:groupId/message/:messageId - should reject message from different group (17 ms)
    ΓêÜ Message.pollResults - should compute poll results correctly (8 ms)
    ΓêÜ Message.pollResults - should return null for non-poll message (6 ms)
    ΓêÜ Message.isPollExpired - should return true for expired poll (7 ms)
    ΓêÜ Message.isPollExpired - should return false for active poll (6 ms)
    ΓêÜ Message.totalPollVotes - should return correct vote count (7 ms)
    ΓêÜ Message.totalPollVotes - should return 0 for non-poll message (6 ms)

  ΓùÅ Chat API - No Mocking ΓÇ║ POST /api/chat/:groupId/poll/:messageId/vote - should return 404 when group not found

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 400

      806 |       .send({ option: 'Yes' });
      807 |
    > 808 |     expect(response.status).toBe(404);
          |                             ^
      809 |     expect(response.body.success).toBe(false);
      810 |     expect(response.body.message).toContain('Group not found');
      811 |   });

      at Object.<anonymous> (src/__tests__/no-mocks/chat.test.ts:808:29)

  console.log
    [2025-11-05T04:56:27.895Z] AUTHENTICATE: Starting authentication for DELETE /690ad8fba8a939773344fd5d

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.895Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.895Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.895Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.895Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fd5f', email: 'nogroup5@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.895Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fd5f

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.895Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fd5f'),
      email: 'nogroup5@example.com',
      name: 'No Group User 5',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.895Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.913Z] AUTHENTICATE: Starting authentication for DELETE /690ad8fba8a939773344fd71

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.913Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.913Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.913Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.913Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fd6d', email: 'member3@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.913Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fd6d

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.913Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fd6d'),
      email: 'member3@example.com',
      name: 'Member User 3',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.913Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.927Z] AUTHENTICATE: Starting authentication for GET /week/invalid-date

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.927Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.927Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.927Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.927Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fd7b', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.927Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fd7b

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.927Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fd7b'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.927Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.940Z] AUTHENTICATE: Starting authentication for GET /week/2025-11-02T07:00:00.000Z

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.940Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.940Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.940Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.940Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fd8b', email: 'nogroup6@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.940Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fd8b

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.940Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fd8b'),
      email: 'nogroup6@example.com',
      name: 'No Group User 6',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.940Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.953Z] AUTHENTICATE: Starting authentication for GET /date/invalid-date

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.953Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.953Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.953Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.953Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fd92', email: 'testuser@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.953Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fd92

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.953Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fd92'),
      email: 'testuser@example.com',
      name: 'Test User',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.953Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.966Z] AUTHENTICATE: Starting authentication for GET /date/2025-11-04T08:00:00.000Z

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.966Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.966Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.966Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.966Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fda2', email: 'nogroup7@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.966Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fda2

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.966Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fda2'),
      email: 'nogroup7@example.com',
      name: 'No Group User 7',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.966Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.980Z] AUTHENTICATE: Starting authentication for GET /

      at log (src/middleware/auth.ts:10:11)

  console.log
    [2025-11-05T04:56:27.980Z] AUTHENTICATE: Authorization header: Present

      at log (src/middleware/auth.ts:13:11)

  console.log
    [2025-11-05T04:56:27.980Z] AUTHENTICATE: Token extracted: eyJhbGciOi...

      at log (src/middleware/auth.ts:21:11)

  console.log
    [2025-11-05T04:56:27.980Z] AUTHENTICATE: Verifying JWT token

      at log (src/middleware/auth.ts:66:13)

  console.log
    [2025-11-05T04:56:27.980Z] AUTHENTICATE: Token decoded successfully: { id: '690ad8fba8a939773344fdaf', email: 'nogroup8@example.com' }

      at log (src/middleware/auth.ts:68:13)

  console.log
    [2025-11-05T04:56:27.980Z] AUTHENTICATE: Fetching user from database with ID: 690ad8fba8a939773344fdaf

      at log (src/middleware/auth.ts:71:13)

  console.log
    [2025-11-05T04:56:27.980Z] AUTHENTICATE: User found: {
      id: new ObjectId('690ad8fba8a939773344fdaf'),
      email: 'nogroup8@example.com',
      name: 'No Group User 8',
      groupName: undefined
    }

      at log (src/middleware/auth.ts:79:13)

  console.log
    [2025-11-05T04:56:27.980Z] AUTHENTICATE: Authentication successful, proceeding to next middleware

      at log (src/middleware/auth.ts:93:13)

  console.log
    [2025-11-05T04:56:27.985Z] GET /api/task - User: 690ad8fba8a939773344fdaf

      at log (src/routes/task.ts:119:11)

  console.log
    [2025-11-05T04:56:27.986Z] GET /api/task - Group found: null

      at log (src/routes/task.ts:126:11)

  console.log
    [2025-11-05T04:56:27.986Z] GET /api/task - User not in any group

      at log (src/routes/task.ts:129:13)

FAIL src/__tests__/no-mocks/task.test.ts (7.095 s)
  Task API - No Mocking
    ΓêÜ POST /api/task - should create a new task (196 ms)
    ΓêÜ GET /api/task - should return group tasks (29 ms)
    ΓêÜ POST /api/task - should reject invalid difficulty (17 ms)
    ΓêÜ GET /api/task/my-tasks - should return user assigned tasks (28 ms)
    ΓêÜ PUT /api/task/:id/status - should update task status (24 ms)
    ΓêÜ POST /api/task/:id/assign - should assign task to users (26 ms)
    ΓêÜ POST /api/task/assign-weekly - should auto-assign tasks (27 ms)
    ΓêÜ GET /api/task/week/:weekStart - should return tasks for week (24 ms)
    ΓêÜ GET /api/task/date/:date - should return tasks for date (22 ms)
    ΓêÜ DELETE /api/task/:id - should delete task (18 ms)
    ΓêÜ POST /api/task - should require deadline for one-time tasks (13 ms)
    ΓêÜ POST /api/task - should reject invalid requiredPeople (14 ms)
    ΓêÜ PUT /api/task/:id/status - should reject invalid status (16 ms)
    ΓêÜ POST /api/task/:id/assign - should reject empty userIds (15 ms)
    ΓêÜ POST /api/task/:id/assign - should reject non-creator assignment (24 ms)
    ΓêÜ DELETE /api/task/:id - should reject non-creator deletion (25 ms)
    ΓêÜ POST /api/task - should reject past deadline (13 ms)
    ΓêÜ POST /api/task - should reject missing required fields (13 ms)
    ΓêÜ POST /api/task - should reject when user not in group (14 ms)
    ΓêÜ POST /api/task - should assign task to specified users (25 ms)
    ΓêÜ GET /api/task/my-tasks - should reject when user not in group (15 ms)
    ΓêÜ PUT /api/task/:id/status - should reject when task not found or not assigned (14 ms)
    ├ù PUT /api/task/:id/status - should reject when assignment not found (16 ms)
    ΓêÜ PUT /api/task/:id/status - should clear completedAt when status is not completed (23 ms)
    ΓêÜ POST /api/task/:id/assign - should reject when task not found (14 ms)
    ΓêÜ POST /api/task/:id/assign - should reject when user not in group (17 ms)
    ΓêÜ POST /api/task/:id/assign - should reject when user lacks permission (19 ms)
    ΓêÜ POST /api/task/assign-weekly - should reject when user not in group (19 ms)
    ΓêÜ POST /api/task/assign-weekly - should handle no tasks to assign (16 ms)
    ΓêÜ POST /api/task/assign-weekly - should skip one-time tasks already assigned (19 ms)
    ΓêÜ POST /api/task/assign-weekly - should skip tasks already assigned for this week (19 ms)
    ΓêÜ POST /api/task/assign-weekly - should handle tasks without requiredPeople (25 ms)
    ΓêÜ DELETE /api/task/:id - should reject when user not in group (16 ms)
    ΓêÜ DELETE /api/task/:id - should reject when user lacks permission (19 ms)
    ΓêÜ GET /api/task/week/:weekStart - should reject invalid date format (13 ms)
    ΓêÜ GET /api/task/week/:weekStart - should reject when user not in group (14 ms)
    ΓêÜ GET /api/task/date/:date - should reject invalid date format (11 ms)
    ΓêÜ GET /api/task/date/:date - should reject when user not in group (14 ms)
    ΓêÜ GET /api/task - should reject when user not in group (15 ms)

  ΓùÅ Task API - No Mocking ΓÇ║ PUT /api/task/:id/status - should reject when assignment not found

    expect(received).toContain(expected) // indexOf

    Expected substring: "Assignment not found"
    Received string:    "Task not found or not assigned to you"

      727 |     expect(response.status).toBe(404);
      728 |     expect(response.body.success).toBe(false);
    > 729 |     expect(response.body.message).toContain('Assignment not found');
          |                                   ^
      730 |   });
      731 |
      732 |   /**

      at Object.<anonymous> (src/__tests__/no-mocks/task.test.ts:729:35)

Failed to collect coverage from C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\socket\socketHandler.ts
ERROR: [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
STACK: 
Failed to collect coverage from 
C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\scripts\updateGroupMembersForRatingTest.ts
ERROR: [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
STACK: 
Failed to collect coverage from C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\services\authService.ts
ERROR: [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
STACK: 
Failed to collect coverage from C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\models\Rating.ts
ERROR: [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
STACK: 
Failed to collect coverage from C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\scripts\purgeDatabase.ts
ERROR: [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
STACK: 
Failed to collect coverage from C:\Users\andy2\Desktop\Cpen321-group-project\backend\src\routes\rating.ts
ERROR: [94mmessage[0m[90m TS151002: [0mUsing hybrid module kind (Node16/18/Next) is only supported in 
"isolatedModules: true". Please set "isolatedModules: true" in your tsconfig.json. To disable this message, you can 
set "diagnostics.ignoreCodes" to include 151002 in your ts-jest config. See more at 
https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics
STACK: 
-------------|---------|----------|---------|---------|-------------------------------------------
File         | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                         
-------------|---------|----------|---------|---------|-------------------------------------------
All files    |    91.5 |    90.07 |   86.58 |   91.58 |                                           
 controller  |   90.24 |    93.51 |     100 |   90.44 |                                           
  auth.ts    |     100 |     87.5 |     100 |     100 | 14                                        
  report.ts  |   85.71 |     92.3 |     100 |   85.18 | 104-108                                   
  user.ts    |   88.99 |    94.25 |     100 |   89.62 | 57-58,124,161-162,174-175,221-222,232-233 
 middleware  |     100 |    94.44 |     100 |     100 |                                           
  auth.ts    |     100 |    94.44 |     100 |     100 | 21                                        
 models      |   93.61 |    89.47 |   86.95 |   93.25 |                                           
  Group.ts   |   95.23 |     62.5 |     100 |   95.23 | 62                                        
  Message.ts |     100 |      100 |     100 |     100 |                                           
  Task.ts    |   83.33 |    83.33 |   66.66 |   82.75 | 62,122-128                                
  User.ts    |     100 |      100 |     100 |     100 |                                           
 routes      |    91.1 |    87.78 |    82.6 |   91.24 |                                           
  auth.ts    |     100 |      100 |     100 |     100 |                                           
  chat.ts    |   96.24 |    93.44 |    90.9 |   96.24 | 175,263,286,295,330                       
  group.ts   |   81.77 |    75.36 |      75 |   81.77 | 135,204-215,229-264,279-288,304,313-314   
  task.ts    |   96.59 |     93.4 |   83.33 |    97.1 | 88,227,307,405,483                        
  user.ts    |     100 |      100 |     100 |     100 |                                           
 services    |    82.6 |    92.85 |     100 |    82.6 |                                           
  auth.ts    |    82.6 |    92.85 |     100 |    82.6 | 35-36,67-68                               
-------------|---------|----------|---------|---------|-------------------------------------------
Test Suites: 5 failed, 4 passed, 9 total
Tests:       4 failed, 161 passed, 165 total
Snapshots:   0 total
Time:        12.47 s
Ran all test suites.
